
# 1 PCB Foundation 

## 1.1 Concept 
PCB (Printed Circuit Board) 印制电路板，简称电路板。PCB是电子元器件的电气连接载体和支撑体，在20世纪50年代开始推广，是现代广泛采用的集成电路构建技术。
[Tips : Appendix-A Ancient circuit construction mode](#Appendix-A)

## 1.2. Structure 
PCB consists of Solder mask, Medium, Copper and Silk layer. 阻焊剂常呈绿色，覆盖于PCB上下表面以阻止被保护电路被焊接，丝印层于阻焊层之上用于描述元件、备注等信息，铜层是PCB的核心，表铜层覆盖于阻焊层之下，内铜层以介质层分隔，各层之间通过过孔通信。

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/structure.png)

Tips : PCB铜层厚度以盎司Oz为单位，1Oz = 35um，常规规格为1Oz，另有2Oz、3Oz等。介质层由FR-4等级的环氧树脂、玻璃纤维和填充剂复合而成。

## 1.3. PCB Design 
<u>Schematic layout</u> and <u> PCB layout</u> are the core of PCB design，schematic uses nets to describe connection of circuit component pins and PCB uses the nets to generate pin-index to guide wiring.

Tips : PCB设计的重点是电路和电磁兼容性的设计，本质是对模电、数电和电磁理论的运用。~~设计软件本身并不重要~~。

### 1.3.1 Schematic & symbol
Schematic layout is the first step of PCB design and which is consists of symbols and net. symbols are abstractions of components with the same number of pins and nets indicates electrical connection between symbol pins. 

Symbols are stored in symbol library and can be created in software. 

Simple design steps in schematic layout : *1*-circuit design, *2*-select/create symbols, *3*-nets connection.

Tips : It is feasible to design PCB directly without schematic, but it will make PCB design difficult. In addition, schematic diagram is very important for software engineers 

### 1.3.2 PCB & footprint 
PCB layout is the second step of PCB design and which is consists of footprint and wiring. footprints are graphical components with accuracy data info (package mode and size, pin spacing and LxWxHxD, etc) and wiring is the realization of (schematic) nets, it's a visible connection on the surface of PCB.

Footprints are stored in footprint library and can be created in software.

Simple design steps in PCB layout : *1*-data set (wire width and spacing, drill diameter and spacing), *2*-size and shape design and component palcement, *3*-Wiring, *4*-copper filled, *5*-set origin and auxiliary flags  

Tips : The placement of components directly affects the difficulty of wiring that use layers and drills (<u>note : both sides can be used</u>).

#### 1.3.2.1 Layer
The concept of 'layers' in software is not exactly the same as that actual PCB and there are different names and types in different software and some layers are not real layers, such as 'mechanical layer' in Altium Designer and 'graphic x' in KICAD, all of these layers are auxiliary.

Only **silk**, **solder mask** and **copper** layers are unified and correspond to reality one by one. 

Copper layers can be used as *signal*, *GND* or *PWR*, common design scheme as below : 

<table width="100%" align="center" text-align="center">
<tr>
<th>layer Nu</th> 
<th> copper </th> 
<th>scheme 1</th> 
<th>scheme 2</th> 
<th>scheme 3</th> 
</tr>

<tr>
<td align="center", valign="center"> 1 </td>

<td align="center", valign="center"> F.Cu </td>
<td align="center", valign="center"> MIX </td>
<td align="center", valign="center"> - </td>
<td align="center", valign="center"> - </td>
</tr>

<tr>
<td align="center", valign="center", rowspan="2"> 2 </td>

<td align="center", valign="center"> F.Cu </td>
<td align="center", valign="center"> MIX </td>
<td align="center", valign="center"> SIG+PWR </td>
<td align="center", valign="center"> GND </td>
</tr>

<tr>
<td align="center", valign="center"> B.Cu </td>
<td align="center", valign="center"> MIX </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> SIG+PWR </td>
</tr>

<tr>
<td align="center", valign="center", rowspan="4"> 4 </td>

<td align="center", valign="center"> F.Cu </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> PWR </td>
</tr>

<tr>
<td align="center", valign="center"> In1.Cu </td>
<td align="center", valign="center"> PWR </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> SIG </td>
</tr>

<tr>
<td align="center", valign="center"> In2.Cu </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> PWR </td>
<td align="center", valign="center"> SIG </td>
</tr>

<tr>
<td align="center", valign="center"> B.Cu </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> GND </td>
</tr>

<tr>
<td align="center", valign="center", rowspan="8"> 8 </td>

<td align="center", valign="center"> F.Cu </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
</tr>

<tr>
<td align="center", valign="center"> In1.Cu </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> GND </td>
</tr>

<tr>
<td align="center", valign="center"> In2.Cu </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> PWR </td>
</tr>

<tr>
<td align="center", valign="center"> In3.Cu </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
</tr>

<tr>
<td align="center", valign="center"> In4.Cu </td>
<td align="center", valign="center"> PWR </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
</tr>

<tr>
<td align="center", valign="center"> In5.Cu </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> PWR </td>
<td align="center", valign="center"> GND </td>
</tr>

<tr>
<td align="center", valign="center"> In6.Cu </td>
<td align="center", valign="center"> GND </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> PWR </td>
</tr>

<tr>
<td align="center", valign="center"> B.Cu </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
<td align="center", valign="center"> SIG </td>
</tr>

</table>

Tips : Power layer can mix signal wire if necessary, but try to keep GND layer clean.

#### 1.3.2.2 Drilling 
Drilling is the electrical hub between PCB layers, including *Through*, *Blind*, *Buried* and *Macro* type.  

![drill](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/drill.png)

#### 1.3.2.3 NetList
Netlist is a text file with the content about 'nets' generated by the schematic automatically, it's also the hub for transition from schematic to PCB layout.

### 1.3.3 Gerber, BOM and Drill Files  
*Gerber* is an international standard format for describing PCB images, which provides data for each PCB process. *Drill files* describe position, size and type of drillings, the file contain in the Gerber, but will be used sometime independently. *BOM*-Bill of Material, describe PCB constructure /attribute

------

# 2 PCB Electromagnetic compatibility

## 2.1 EMC

EMC (Electromagnetic compatibility) 电磁兼容性，用于描述设备或系统在电磁环境中**抵抗干扰** (EMS-Electromagnetic susceptibility 电磁耐受性) 和**释放干扰** (EMI-Electromagnetic interference 电磁干扰) 的特性.




	来源：脉冲噪声、放射电磁场、静电、雷击、电压变动 分布电容 分布电感 ，PCB布线天线 电缆线 公共导线 高频开关元件 等 分为 辐射发射：通过空间以电磁波形式传播的电磁干扰 和传导发射：通过导体传播的电磁干扰


电路设计方面的对策
	具干扰性的回路，如时脉、驱动器、交换式电源切换、振荡器式控制信号，应加隔离遮蔽。
	电路设计尽可能选用低噪声零组件，且须考虑噪声变化与环境温度变化之关系。
	陶铁磁体铁芯适用于高频滤波，但须注意经由此线圈负载功率损耗。
	稳压器须考虑抑制线路间共通阻抗耦合问题。
	振荡器本身输出越小越好，如须要较大输出，宜由放大器放大。
	功率放大应予隔离以防止辐射性发射。
	电解质电容器适于清除高涟波及暂态电压变化。
	动力线的干扰有低压（或瞬间断电）超压及突波，这些干扰通常来自于电力开关的动作、重负载的开与关之瞬间、功率半导体动作、保险丝烧断时、雷电感应…等。
	须考虑下述项目来抑制：
			使用电源滤波器。
			适当的电力分配。
			受干扰的装置改用另一电路。
			将电子零件及滤波器适当的包装。
			使用隔离变压器。
			装置压敏电阻。
	交流电磁接触器线圈、电磁阀，皆须联结火花消除器。
	电磁开关之热电驿输出侧须联结三相火花消除器。
	直流继电器线圈联结二极管，以供反相电压保护。
	火花消除器距离负载侧愈近愈好。
	把突波吸收器装于电路开关和噪声滤波器之间，线与线间，线与接地之间，将能有效吸收突波。

11.  IC去偶电容的布局要尽量靠近IC的电源管脚，并使之与电源和地之间形成的回路最
短

12.  元件布局时,应适当考虑使用同一种电源的器件尽量放在一起, 以便于将来的电源分
隔

13.  用于阻抗匹配目的阻容器件的布局，要根据其属性合理布置。
串联匹配电阻的布局要靠近该信号的驱动端，距离一般不超过500mil。
匹配电阻、电容的布局一定要分清信号的源端与终端，对于多负载的终端匹配一定要在
信号的最远端匹配。

## 布线

1.  布线优先次序
关键信号线优先：电源、摸拟小信号、高速信号、时钟信号和同步信号等关键信号优先
布线

密度优先原则：从单板上连接关系最复杂的器件着手布线。从单板上连线最密集的区域
开始布线

2. 3.  尽量为时钟信号、高频信号、敏感信号等关键信号提供专门的布线层，并保证其最小
的回路面积。必要时应采取手工优先布线、屏蔽和加大安全间距等方法。保证信号质量

4.  电源层和地层之间的EMC环境较差，应避免布置对干扰敏感的信号 (PS PWR和GND之间的直接夹层不布置敏感信号)

5.  有阻抗控制要求的网络应布置在阻抗控制层上

6. 其它规则
	1) 地线环路最小原则

	环路最小规则，即信号线与其回路构成的环面积要尽可能小，环面积越小，对外的辐射
	越少，接收外界的干扰也越小。针对这一规则，在地平面分割时，要考虑到地平面与重
	要信号走线的分布，防止由于地平面开槽等带来的问题；在双层板设计中，在为电源留
	下足够空间的情况下，应该将留下的部分用参考地填充，且增加一些必要的孔，将双面
	地信号有效连接起来，对一些关键信号尽量采用地线隔离，对一些频率较高的设计，需
	特别考虑其地平面信号回路问题，建议采用多层板为宜

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/地线环路最小.png)

	2） 窜扰控制
	串扰（CrossTalk)是指PCB上不同网络之间因较长的平行布线引起的相互干扰，主要是
	由于平行线间的分布电容和分布电感的作用。克服串扰的主要措施是：
	加大平行布线的间距，遵循3W规则。
	在平行线间插入接地的隔离线。
	减小布线层与地平面的距离

	“分布电容是指由非电容形态形成的一种分布参数。一般是指在印制板或其他形态的电路形式,在线与线之间、印制板的上下层之间形成的电容。低频时对电路几乎没有影响。高频就要考虑分布电容的影响,所以高频电路一般密封在金属盒子里,就是阻止环境对电路的影响
	由于导线布线和元器件的分布而存在的电感叫分布电感,同样对高频电路有影响

	3) 屏蔽保护
	对应地线回路规则，实际上也是为了尽量减小信号的回路面积，多见于一些比较重要的
	信号，如时钟信号，同步信号；对一些特别重要，频率特别高的信号，应该考虑采用铜
	轴电缆屏蔽结构设计，即将所布的线上下左右用地线隔离，而且还要考虑好如何有效的
	让屏蔽地与实际地平面有效结合
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/屏蔽保护.png)

  4)走线的方向控制规则：
	即相邻层的走线方向成正交结构。避免将不同的信号线在相邻层走成同一方向，以减少
	不必要的层间窜扰；当由于板结构限制（如某些背板）难以避免出现该情况，特别是信
	号速率较高时，应考虑用地平面隔离各布线层，用地信号线隔离各信号线

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/走线方向控制.png)

  5)走线的开环检查规则：

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/走线开环检查.png)

	一般不允许出现一端浮空的布线（Dangling Line),
	主要是为了避免产生"天线效应"，减少不必要的干扰辐射和接受，否则可能带来不可预
	知的结果。

  6)阻抗匹配检查规则
  同一网络的布线宽度应保持一致，线宽的变化会造成线路特性阻抗的不均匀，当传输的
  速度较高时会产生反射，在设计中应该尽量避免这种情况。在某些条件下，如接插件引
  出线，BGA封装的引出线类似的结构时，可能无法避免线宽的变化，应该尽量减少中
  间不一致部分的有效长度

  8） 走线闭环检查规则（自环）
	防止信号线在不同层间形成自环。在多层板设计中容易发生此类问题，自环将引起辐射
	干扰
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/自环.png)

10） 走线的谐振规则
主要针对高频信号设计而言，即布线长度不得与其波长成整数倍关系，以免产生谐振现
象
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/谐振.png)

11） 走线长度控制规则
即短线规则，在设计时应该尽量让布线长度尽量短，以减少由于走线过长带来的干扰问
题，特别是一些重要信号线，如时钟线，务必将其振荡器放在离器件很近的地方。对驱
动多个器件的情况，应根据具体情况决定采用何种网络拓扑结构。

12） 倒角规则

PCB设计中应避免产生锐角和直角，产生不必要的辐射，同时工艺性能也不好。

13) 器件去藕规则：

A.  在印制版上增加必要的去藕电容，滤除电源上的干扰信号，使电源信号稳定。
在多层板中，对去藕电容的位置一般要求不太高，但对双层板，去藕电容的布局及
电源的布线方式将直接影响到整个系统的稳定性，有时甚至关系到设计的成败。
B.  在双层板设计中，一般应该使电流先经过滤波电容滤波再供器件使用，同时还
要充分考虑到由于器件产生的电源噪声对下游的器件的影响，一般来说，采用总线
结构设计比较好，在设计时，还要考虑到由于传输距离过长而带来的电压跌落给器
件造成的影响，必要时增加一些电源滤波环路，避免产生电位差。
C.  在高速电路设计中，能否正确地使用去藕电容，关系到整个板的稳定性

14） 器件布局分区/分层规则

A.  主要是为了防止不同工作频率的模块之间的互相干扰，同时尽量缩短高频部分
的布线长度。通常将高频的部分布设在接口部分以减少布线长度，当然，这样的布局仍
然要考虑到低频信号可能受到的干扰。同时还要考虑到高/低频部分地平面的分割问题，
通常采用将二者的地分割，再在接口处单点相接。
B.  对混合电路，也有将模拟与数字电路分别布置在印制板的两面，分别使用不同
的层布线，中间用地层隔离的方式

15） 孤立铜区控制规则(覆铜）

孤立铜区的出现，将带来一些不可预知的问题，因此将孤立铜区与别的信号相接，有助
于改善信号质量,
通常是将孤立铜区接地或删除。在实际的制作中，PCB厂家将一些板的空置部分增加了
一些铜箔，这主要是为了方便印制板加工，同时对防止印制板翘曲也有一定的作用

16） 电源与地线层的完整性规则：
对于导通孔密集的区域，要注意避免孔在电源和地层的挖空区域相互连接，形成对平面
层的分割，从而破坏平面层的完整性，并进而导致信号线在地层的回路面积增大。

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/孔对层的分隔.png)

17)17） 重叠电源与地线层规则：

不同电源层在空间上要避免重叠。主要是为了减少不同电源之间的干扰，特别是一些电
压相差很大的电源之间，电源平面的重叠问题一定要设法避免，难以避免时可考虑中间
隔地层

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/重叠电源.png)

18） 3W规则：
为了减少线间串扰，应保证线间距足够大，当线中心间距不少于3倍线宽时，则可保持
70%的电场不互相干扰，称为3W规则。如要达到98%的电场不互相干扰，可使用10W的
间距。

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/3W.png)

19) 20H规则：
由于电源层与地层之间的电场是变化的，在板的边缘会向外辐射电磁干扰。称为边沿效
应。
解决的办法是将电源层内缩，使得电场只在接地层的范围内传导。以一个H（电源和地
之间的介质厚度）为单位，若内缩20H则可以将70%的电场限制在接地层边沿内；内缩
100H则可以将98%的电场限制在内。
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/20H.png)

20） 五---五规则：
印制板层数选择规则，即时钟频率到5MHz或脉冲上升时间小于5ns，则PCB板须采用多
层板，这是一般的规则，有的时候出于成本等因素的考虑，采用双层板结构时，这种情
况下，最好将印制板的一面做为一个完整的地平面层。

# 3 PCB design software 

## 3.1 KICAD

## 3.2 Altium designer

------

## <span id = "Appendix-A"> Appendix-A：Ancient circuit construction mode </span>

### A.1 快速构建
这是一种非常草率的方法，只对构造极其简单的电路原型有用。它通过在任意大小的空间里把元器件焊接在一起来构成非常简单的电路。
![QConstruct](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/QConstruct.png)

如图，将晶体放在处理器上方，晶体引线直接焊接到处理器引脚，其它引线也焊接到处理器引脚来引入电源和接地从而把处理器的I/O和外部连接起来。

### A.2 面包板
面包板又称电路实验板，是带有排列孔的塑料/铁/磁块儿，它被设计用来盛放DIP封装（双列直插封装）的集成电路和离散元器件。术语“面包板”可追溯到真空管时代，当时真空管无线电设备是建立在一块用于切面包的结实木板上的，因此得名。

![Bboard](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/Bboard.png)
使用面包板也不是搭建健壮可靠系统的方法，面包板限制于过多的电容、串扰及噪声敏感度，长期使用后还有机器故障。面包板上的电路连接是通过一段段小的电线来实现的，而这些电线构成了小的天线，这些小天线会吸收周围零散的电磁辐射从而影响电路。

### A.3 绕接技术
绕接曾经是常用的电路构建技术，必须是DIP封装的电路才能使用绕接，它通过约0.6英寸的引脚安装在插座上，然后用绕砸工具（绕砸器和剥线器）在引脚周围绕上电线，这样便构成了一个电路，这也被称为冷焊技术，即不带焊接的一种线与引脚间的紧密电气连接技术。

![WinTech](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/WinTech.png)
绕接是一种非常快速的原型技术，且健壮和可靠。在早期，NASA（美国国家航天局）惯于使用绕接技术构建宇宙飞船电子设备，并且许多大型计算机也使用这种技术。

## <span id = "Appendix-B"> Appendix-B：PCB process </span>

### B.x 焊接
PCB元件焊接有*回流焊*和*波峰焊*两种方法，回流焊是贴片元件焊接的一种低成本方法：将钢网抠刻出与欲焊接的PCB元件的位置和大小相同的区域，然后将PCB与铁网固定并刷锡浆，同时人工放置元件以完成焊接；使用SMT自动贴片机可高效完成贴片元件焊接，但成本较高。波峰焊是插件元件焊接的方法：PCB插装元件后经过锡炉即焊接完成，并通过剪脚机将管脚剪短。

## <span id = "Appendix-C"> Appendix-C：PCBA and ICT </span>

### C.1 Concept
PCBA（Printed Circuit Board +Assembly）又写作PCB’A，是指对PCB空板的装配过程，也指通过该过程生产的成品印刷电路板。PCBA测试是对完成焊接的PCBA板进行程序烧制和有关通路、环境、电压、电流、压力等方面的测试，是PCBA加工过程中的一个重要环节，处于生产工序的末端，是严控出货品质的重要手段。

### C.2 PCBA测试方式及PCBA测试架
小批量生产的PCBA可以借助专业测试设备或手工万用表的方式对测试点检测，对于大批量生产的PCBA测试则要使用测试架（Fixture）来辅助完成。*PCBA测试架*又称PCBA测试治具，其原理是通过测试顶针与PCB板的测试点连接，从而获取电路中的电压、电流等关键数据，并在测试架的显示屏幕上显示，达到快速检测的目的。客户在设计PCB板时，就应该考虑其测试方案并预留PCB测试点，然后出具专业的测试文档或测试方案给制造商。
[制作PCBA测试架要提供的文件](http://www.nodpcba.com/news/2609-cn.html)。

### C.3 测试分类及原理
PCBA测试的方法主要包括：ICT测试、FCT测试、老化测试、疲劳测试、振动测试、高低温测试。

#### C.3.1 ICT测试 - 导通性测试
ICT (In Circuit Test) 又称在线测试仪，ICT测试主要是通过测试探针接触PCB的测试点 (ICT测试点) 来检测线路的开路、短路以及PCBA板上元器件的焊接情况（不涉及到功能按键或者输入输出方面的测试）。ICT测试具有操作简单、准确性高的特点。一些中低端的PCBA板可专门制作ICT测试治具，可有效的降低测试成本。

##### C.3.1.1 ICT测试对PCB设计的要求
PCB对角上需设计两个125MILS的非金属化的定位孔，并且每个网络都至少有一个ICT测试点，测试点可以是PCB焊接面的焊点或过孔，检测点的焊盘尺寸最小为24mils (0.6mm)，两个单独测试点的最小间距为60mils (1.5mm)。

#### C.3.2 FCT测试 - 功能性测试
FCT测试由又可称为PCBA功能测试，是指对目标内部功能的测试，可对测试目标提供模拟的运行环境（激励和负载），使其工作于各种状态之中，以测量输出端的参数是否符合要求。测试的内容主要包括电压、电流、功率、功率因素、频率、占空比、亮度与颜色、字符识别、声音识别、温度测量、压力测量、运动控制、FLASH和EEPROM烧录等。

#### C.3.3 老化测试
老化测试是指对PCBA板进行长时间的通电，进行输入输出方面的测试，模拟用户的操作，以确保其性能符合市场的要求。

#### C.3.4 疲劳测试
疲劳测试是指对PCBA进行高频、长时间的操作，观察是否出现失效，判断测试出现故障的概率，以此来检查PCBA板的工作性能。

#### C.3.5 震动测试
震动测试采用专业的震动测试仪进行长周期测试，确保焊接元件无任何脱落情况出现，抽样测试比例根据客户要求决定。

#### C.3.5 高温测试
高温测试是指将PCBA放入测试房，并针对性地提供-40℃至100℃等常见温区的测试服务，充分模拟产品的环境温度，最大化确保产品的可靠性。

### C.4 PCBA测试材料与价格

#### C.4.1 测试探针
目前测试探针分国产、台湾香港、进口三种。进口产品一般是德国、美国、日本的产品，品牌有INGUN、TCI、日电、华荣、中探、亚探等。测试探针的质量主要体现在材质、镀层、弹簧、套管的直径精度及制作工艺。目前包括国内的产品其材质很多用进口材质，所以除非是偷工减料一般探针材质问题不是很大，针及套管的直径精度方面国内与台湾香港的产品差不多，进口稍好但一般影响不大，弹簧及镀层的质量这方面进口产品比国内要好很多，台湾香港产的比国内稍好一些，原因主要是工艺水平上的差别，国产的探针镀层抗磨损较差镀层容易脱落。如果制作的测试治具使用时间及测试次数超过15万次以上选用进口产品较为合适，但进口的探针价格较贵。目前国内的制作水平和工艺逐步提高，并且在当前价格大战的情况下，不少代理商用国产针冒充进口或台湾产的探针出售。如果测试要求和测试次数不高的话建议可选用国产探针。探针的质量主要对测试治具制作中的测试次数及接触是否良好有关。

#### C.4.2 测试线
目前测试线都是国外进口或台湾香港地区生产，其产品的区别不大。价格为约125元一卷。

#### C.4.3 测试板材
测试治具中所选用的板材一般有压克力（有机玻璃）、环氧树脂板等。普通的探针孔径大于1.00毫米的治具，其板材以有机玻璃居多，有机玻璃价格便宜，同时有机玻璃相对较软钻孔时有胀缩探针套管与孔的结合紧密，由于有机玻璃是透明的治具出现问题检查十分容易。但是普通的有机玻璃在钻孔时容易发生溶化和断钻头，特别是钻孔孔径小于0.8毫米时问题很大，一般钻孔孔径小于1毫米时都采用环氧树脂板材，环氧树脂板材钻孔不容易断钻头其韧性及刚性都好但价格较贵一些，环氧树脂板没有胀缩所以如果钻孔孔径不精确会造成探针套管与孔之间很松动产生晃动。环氧树脂板不透明如果治具出现问题检查较困难一些，另外有机玻璃温差变形比环氧树脂板大一些，如果测试的密度非常高的需采用环氧树脂板。板材的选用及钻孔的精度对整个测试治具的精度起关键的作用。
治具的底座大部份是用PVC或有机玻璃制作的，大部份的厂家制作治具底座时是根据测试板材的大小临时制作的，所以底座的质量及底座的重复使用率不是很好，所以建议统一底座大小及标准，本网站提供二种标准的底座可适用大部份的专用测试机，其材料采用20毫米的有机玻璃，由有机玻璃厂家制作质量及工艺非常好，可重复使用，价格虽然稍贵但物有所值。

## <span id = "Appendix-D"> Appendix-D：Common component packaging </span>

## <span id = "Appendix-E"> Appendix-E：HUAWEI PCB design specification </span>

Standard : China GB/T 4588.3-2002

<div sytle="display:none">
### 布局

4.  布局操作的基本原则

A. 遵照“先大后小，先难后易”的布置原则，即重要的单元电路、核心元器件应当优
先布局

C. 总的连线尽可能短，关键信号线最短;
  高电压、大电流信号与小电流，低电压的弱信号完全分开;
  模拟信号与数字信号分开；高频信号与低频信号分开；
  高频元器件的间隔要充分．

D. 栅格：一般IC器件布局时，栅格应为50--100 mil. 小型表面安装器件如表面贴装元件布局时，栅格设置应不少于25mil
	PS:大多数软件的光标对栅格有磁力吸附性，所以密集的栅格有助于小器件的对齐摆放
		KICAD中称栅格为网格

5.  同类型插装元器件在X或Y方向上应朝一个方向放置。同一种类型的有极性分立元件也
要力争在X或Y方向上保持一致，便于生产和检验。

6.  发热元件要一般应均匀分布，以利于单板和整机的散热，除温度检测元件以外的温度
敏感器件应远离发热量大的元器件

7.  元器件的排列要便于调试和维修，亦即小元件周围不能放置大元件、需调试的元、器
件周围要有足够的空间

10.  BGA与相邻元件的距离>5mm。其它贴片元件相互间的距离>0.7mm；贴装元件焊盘的
外侧与相邻插装元件的外侧距离大于2mm；有压接件的PCB，压接的接插件周围5mm
内不能有插装元、器件，在焊接面其周围5mm内也不能有贴装元、器件


## 布线参数设置

注：选择多层板、及多层板中信号层的层数与PIN密度的关系（经验值） 

Pin密度  信号层数  板层数
1.0以上  2			2
0.6-1.0  2  		4
0.4-0.6  4  		6
0.3-0.4  6  		8
0.2-0.3  8  		12
<0.2	10			>14
注：PIN密度的定义为： 板面积（平方英寸）/（板上管脚总数/14）局

除此之外还要考虑信号速度、制造成本、交货日期等多种因素

1.  布线层设置
在高速数字电路设计中，电源与地层应尽量靠在一起，中间不安排布线(PS电源层与地层之间不加信号层)。所有布线层都
尽量靠近一平面层，优选地平面为走线隔离层 (多个信号层如需分隔则用地层分隔)。
为了减少层间信号的电磁干扰，相邻布线层的信号线走向应取垂直方向。
可以根据需要设计1--2个阻抗控制层，如果需要更多的阻抗控制层需要与PCB产家协商。
阻抗控制层要按要求标注清楚。将单板上有阻抗控制要求的网络布线分布在阻抗控制层
上

2. 线宽与线间距 

A. 密度关系
	板的密度越高，倾向于使用更细的线宽和更窄的间隙。

B. 电流强度关系
当信号的平均电流较大时，应考虑布线宽度所能承载的的电流，
线宽可参考以下数据
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/厚度宽度载流.png)

注： 用铜皮作导线通过大电流时，铜箔宽度的载流量应参考表中的数值降额50%去选择考
虑。

C. 电压强度关系
线间距的设置应考虑其介电强度。
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/电压关系.png)
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/电压关系2.png)

D. 高可靠性要求时，趋向更宽走线和更宽间距

E. PCB加工技术限制
国内 国际先进水平
推荐使用最小线宽/间距  6mil/6mil  4mil/4mil
极限最小线宽/间距 4mil/6mil  2mil/2mil

3. 孔的设置

制成板的最小孔径定义取决于板厚度，板厚孔径比应小于 5--8

板厚：			  3.0mm 2.5mm 2.0mm 1.6mm 1.0mm
最小孔径：		  24mil 20mil 16mil 12mil 8mil
焊盘直径：		  40mil 35mil 28mil 25mil 20mil
内层热焊盘尺寸：  50mil 45mil 40mil 35mil 30mil

PS：后面两个是针对插件封装器件的孔和针脚孔而言的

4. 特殊区域
	某一个区域可能有不同于常规设置参数，如某些高
	密度器件需要用到较细的线宽、较小的间距和较小的过孔等


## 工艺设计要求


## 自检
	检查晶体、变压器、光藕、电源模块下面是否有信号线穿过，应尽量避免在其下穿线，
	特别是晶体下面应尽量铺设接地的铜皮

## 候工说
	尽量短线、尽量少孔、线长尽量等长、同类同层（如地线一层、电源线一层，）、同类同侧
	（如相同功能的引脚在一侧处理）


## PS

	电路图的文字符号如C R L VT（晶体管）是国标规定的 GB/T 20939-2007

	电阻的主要作用：限流 降压

	电容：固定电容、可变电容  | 无极性、有极性
	电容特点 通交流 隔直流，（因为交流会使电容产生磁场，进而导致两个极片导通电流（不是真的导通，而是电场的作用导致的））
	主要作用：耦合、滤波、移相和谐振

![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/电容耦合.png)
![structure](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB/电容滤波.png)

	电感：通直流阻交流，也是因为电磁场原因导致的特性
	具有高频阻流、滤波和谐振的功能

</div>


<div sytle="display:none">

基本概念
--------------
1. 铺铜
	如果PCB的GND较多，如SGND AGND GND等等，就需要根据PCB版面的位置的不同 分别以最主要的地为基准参考来覆铜，即将地连接在一起

	好处是：
	减小地线阻抗，提高抗干扰能力
	降低压降，提高电源效率
	与地线相连还可以减小环路面积
	出于让PCB焊接时不变形的目的，PCB生产厂家会要求PCB设计者在PCB的空旷区域填充铜皮或者网格状的地线

	?覆铜如何减少了环路面积？

		假设对地线覆铜，覆铜之前，信号A回到地线，地线曲折走线回到电源地，面积是S1，
		覆铜之后，将所有连接到该地线的信号，再走回到电源地时，线路都变短了，大多数都变成了直线距离，因此回路面积减少了



# PCB画板

## KICAD 画原理图 步骤

	1. 画原理图
		在画的过程中，如果库中没有使用的元件，需要自建元件，最好使用元件封装器，将其封装到库中
		如需分层的，见下文

	2. 标注原理图 
		一般在原理图中引入任何一个元件之后，随后做的事情之一就是命名该元件，如J？修改为J1、R?修改为R3、C？修改为C10等等，
		如果你有一批这样的事情没做、或害怕有遗漏（其实第三步会帮你找到）或不想一个一个弄，只想批量完成，那么
		就可以使用“标注原理图”工具，它将*自动*的 把带有类似“J？”的命名改为合理的命名。

	3. 执行电气规则检查 
		KICAD帮助找到原理图中遗漏的、不和规则的、错误的等等问题，找到之后可以右单机提示箭头，查看具体原因并修正

	4. 对应封装
		该步骤有两种方法：
			A：点击”分配PCB封装到原理图符号"，该方法属于一体式分配，建议当确保所使用的元件都有对应的封装库时使用
			B: 针对某个元器件右点击 选择“属性” 然后选择“编辑封装” 在弹出的对话框中点击“选择”（如果记得封装对应的文本，就直接输入文本，然后点击确定）
				找到对应的封装即可

			( 注：在KICAD中，也可以使用“编辑符号字段”功能，该功能不但能关联封装，还能直观修改元件名 )

		对于这两种方式，无论哪一种，如果发现没有找到对应合适的封装，就需要自己创建了

	4-2. 创建封装
		点击“封装编辑-创建/编辑封装”，编辑完成后再返回到第4步选择对应封装

		注意：如果没有对应封装，最好自己创建并关联。但如果这些不做也不会影响到网表的生成，到第6/7步时也可以在Layout的同时设计或引入封装（就像引入原理图中的元件一样）

	5. 生成网表

	6. 完善右下脚页面信息，该信息在打印和传递给其它工程人员时或者后期自己维护时非常有用
		位置在“文件->图框设置”

	7. (可选）生成BOM

	------------------ 至此，原理图部分就完成了 ---------------------------------------------------

	8. 打开PCBnew设计界面 并 读取原理图生成的网表(从原理图更新PCB 或 加载网表)

	9. 布线 Layout （ 连连看的过程开始了，这部分有电磁兼容性设计等等要求，还需要分层设计等，而不是直接就OK了）

	10. 执行调试规则检查（与原理图一样，可以通过软件检查PCB）

	11. 完善右下脚页面信息，该信息在打印和传递给其它工程人员时或者后期自己维护时非常有用

	12. 导出Gerber文件

	13. 生成钻孔文件 “文件->绘制”


## PCB Layout (KICAD 示例）


### 1. 设置电路板(可以在之前后之后从网络表或原理图导入PCBnew)

	点击菜单栏“文件->电路板设置”，弹出对话框 (或直接点击 电路板设置图标)

	点击“层”主类，设置PCB层数、PCB厚度、勾选非信号层（可选的或辅助的层）

	点击“文本与图形”子类，设置层和框的的布线宽度、文本宽度、

	点击“设计规则”主类，设置最小布线宽度、最小孔径等信息，以及是否允许盲孔和埋孔等等设置

	分别点击“网络类表”、“导线和过孔”、“阻焊/锡膏”子类，并设置相关信息

	详细解读TBD ... ...


	层之解读：

			PS: KICAD中孔的使用方法
				如果是两层板，孔只包含一种，就是通孔

				如果是多层板，打了孔之后可以右单击或者点击E来编辑，先选择孔的类型，然后选择开始层和结束层即可。


		前言3：
			KICAD可以使用50个不同的层，其中1~32个铜层用于布线，

										   14个固定用途的技术层：
														a: 6对 成对儿层 （正/反面成对，共12层）：粘合剂层、焊膏层、丝印层、阻焊层、封装层、制造层
														b: 2个独立图层：边缘切割层、边距层

										   4个辅助层：
												注释、E.C.O.1、E.C.O,2、图纸

											32+(6*2+2)+4 = 50层

											eg；如果是双层板，则KICAD上产生的层为：2 + （6*2+2) + 4 = 20层
												即，无论多少层板，一定有14个固定用途的技术层 + 4个辅助层= 18层  然后再加上N层板
												，这里也可以看到，多少层板是针对有多少个铜层而言的，有多少个铜层，就是多少层板

		描述：
			1. 铜层 x (1~32)
				铜层是用于放置封住器件的和各封装器件连接通信的层，从顶层（0层）到底层（31层）一共可以有32层，只有顶层和底层可以防止封装器件
				F.Cu，称为顶层的铜层、B.Cu称为底层的铜层、一般双层板只有这两个铜层，如果是多层板则可能有In1.Cu（第二层）、In2.Cu（第三层）... ...

			2. 技术层 - 成对层 x 6 x 2
				成对的含义是"上层上有，对应的下层上就有“，上层对应F.xx ，下层对应B.xx，并且这些层的焊盘/绘图/文本等元素自动镜像，
				也就是说在上层上设置好了，下层自动镜像 不用再设置

				1) 丝印层   F.SilkS/B.SilkS : 如果PCB是蛋糕，丝印就是蛋糕上“生日快乐”的字，丝印层用于描述元件、备注电路板信息等使用，这对于后期的电路板检修等工作特别重要
				2) 阻焊层   F.Mask /B.Mask  : “阻止绿油覆盖焊盘”（而不是'阻止焊接')，所有的焊盘都应该出现在阻焊层上

				3) 焊膏层   F.Paste/B.Paste : 该层可助 回流焊 工艺 
				4) 粘合剂层 F.Paste/B.Paste : 该层可助 波峰焊 工艺 

				5) 封装层	F.CrtYd/B.CrtYd : 用于显示元件在PCB上占用的物理空间大小
					封装层将封装元件的 包含引脚在内的 整个轮廓用线段框在内部起来，表示器件在此位置安装

				6) 制造层   F.Fab  /B.Fab	: 用于辅助元件贴装（用于记录的目的，将信息传递给PCB厂商或组装厂）
					制造层也叫装配层，用于封装元件所在位置的元件名标识，类似于丝印，当一块板子拿到手之后就要焊接元件，如果你没有PCB图就不知道这个焊盘是焊接什么的，
					有了制造层提示就可以方便焊接了，如一个16个引脚的贴片芯片的焊盘中央写了“MAX232DR”字样，你就知道这里是焊接MAX232DR芯片的。

				
				对于1）和2) 是给生产PCB的厂家使用的，而3）和4）是给焊接元器件的厂家使用的，如果你的板子是自己焊的，则不需要3）和4）

				一般技术层只考虑丝印和阻焊层，其它层可以忽略，另外如阻焊层，AD系列的软件都是自动生成的


				
			3. 技术层 - 独立层 x 2
				边缘切割层 Edge.Cuts
					仅使用改层来绘制电路板的边框，所有的其它层，都在该层的框选之内的范围有效

				边距层 Margin
					描述电路板的边缘后退距离 TBD

			4. 辅助层 x 4
				这些层可以用于任何自定义用途：注释、E.C.O.1、E.C.O,2、图纸


### 2. 勾画PCB尺寸布局 
	
	这在AD系列软件中被称为“机械层”，在KICAD中被称为“边缘切割层”，
	所有的其它层都只在该层的框选之内的范围有效

	选中该层（注意是选中，不是勾选，在KICAD中，被勾选的层只是’显示‘而不是’选中‘）
	可以在右侧’层管理器‘点击选中，选中之后在层管理器中会有一个向右的小箭头
	，也可以在菜单栏下方的下拉菜单中选择

	然或使用’图形线条‘ 或 ’圆‘ 或 ’弧‘ 工具，来画一个范围，这个范围就是描述PCB真实尺寸的，PCB厂家会看这个参数来切割
	制作以会有 圆和弧工具 是因为有些PCB板就是原型和弧形的，另外图形线条也不是只能画矩形，可以两点一线的画任何形状，
	更可以使用三个工具配合来画出想要的任意形状
	
	PS：这时候KICAD提供的’尺寸标注‘工具特别好用，直接在PCBnew中标出尺寸线，而不用一个一个格子去查了


### 3. 放置封装器件 

	首先说明，前两步 与 从原理图生成PCB/加载网络表 之间可以调换，也就是可以先设置电路板、勾画PCB尺寸，然后再导入原理图到PCB

	初次加载到PCB的封装器件是叠加在一起的，非常混乱，可以用’不显示飞线‘工具，暂时隐藏飞线，然后将器件摆放到第2步的框架内，
	可以利用翻转、镜像等功能摆放，最终以所有的交叉飞线最少为目的

	也可以使用菜单栏”放置->自动放置封装->自动放置和选定的元件“，点击之后，会看到KICAD自动将一个个器件摆放到框架内
	也可以使用菜单栏”放置->自动放置封装->自动摆放板外封装“，点击之后，会看到KICAD自动将一个个器件摆放到框架内
	两种工具的不同是，前者需要选定才自动摆放。而后者 只要是框架之外的都自动摆放到框架内

	自动摆放总是不尽人意的，通常都需要手动放置

	在手动放置过程中，可以选择某些器件，右单击，选择“对齐”，以对齐封装（如果不使用这个工具，不保证手动能对齐，因为软件的’磁性‘不是很好）

	放置完成之后，可以框选确定的器件，右单击选择“锁定”，以免被误移动

	PS : 封装器件可以放置在顶层和底层，默认都是在顶层的，那么如何将器件放在底层呢？
		1) 选中要放在底层的封装器件，然后右单击选择"翻转"，则这些器件都变成了底层器件，也可以看到封装、文字等都镜像（前后镜像）显示了
		2) 如果直接将底层的封装器件放置到框架内，会发现顶层的封装器件干扰了视线，所以可以选择层管理器中的‘项目’，取消"封装顶层“的勾选
			，可以看到顶层的封装器件都隐藏了，而底层的封装器件仍然存在，这样就可以放置底层了，反之亦然

		3) 注意：即使顶层被隐藏了，还是能被鼠标点击或框选到的，所以在放置底层封装器件时不要随意框选点击空白区域，反之亦然


### 4. 布线 

	经过第3步，封装器件已经在顶层和底层放置好了，并且飞线交叉最少，现在要根据飞线的连接，开始布线了，
	所布置的线会被PCB厂家刻蚀出来，这些线就是铜线，即从铜箔中刻蚀出的线

	1) 设置布线参数
		线有粗细、孔有大小，这些都直接反应到了生成的PCB板中
		这些参数其实在第1步"电路板设置"就完成了，在此可以重新设置

		在菜单栏下方也实时显示着布线信息

		另外，KICAD允许为不同的网络（称为"网类“）设置布线参数，这样布置不同的网络时就很方便，如果所有的网络都使用一种规格的参数，那么就
		忽略掉这种设置。当不进行设置时使用的是默认网类

		PS：所有的有关PCB的参数设置，都可以在“文件->电路板设置”中找到，详看第1步

	2) 开始布线 
		所有参数设置完毕就要开始布线了

		KICAD中提供了“交互式布线”工具，以辅助布线，可以提高布线效率。更多功能待解锁

		大部分时候都避免不了手动布线的

		点击右侧“布线”图标，开始布线，选择一个封装器件的引脚 左单击，可以看到同时引出线，在空白位置点击会截停，然后继续画线，直到该引脚
		飞线所对应的另一个引脚，左单击，此时可以看到这两个引脚之间的飞线消失了，这说明用真正的导线代替了飞线，布置成功，以此类推

		PS-1 ：过孔？布线？交叉？

			对于稍微复杂的PCB来讲，封装器件摆放的再好也避免不了飞线交叉，这就说明在一层上走不通，必须将相交叉的一条或几条线从其它层走，
			方法就是布线到交叉位置之前双击（左单击）截止，然后在截止位置放置过孔，
			此时要切换到其它层（如果是2层板就只能切换到底层B.Cu），然后再继续布线，过了交叉点之后，在到达指定引脚之前，再放一个过孔，
			此时要切换到原来的层，然后再继续布线，直到连接到指定引脚，这样就解决了交叉问题！

		PS-2 : 冗余？连通？
			
			默认情况下，KICAD（其它软件也是如此）给出的飞线只确保了电气连通性，但却多出了很多冗余的线，比如A到C、B也是到C，软件给出飞线A到C、B到C
			，其实可以视情况更改为A到B再到C，这两种情况都达到了目的，但一定有一种是最优的

			找出电气连通性，使用“高亮网络”工具是非常好的选择

		PS-3 : 对于多层板，其中的GND/VCC层，不是严格的只有电源，也可以在VCC层走一些信号线，但尽量保证GND层是干净的，不要在GND层走信号线，因为要做参考标准，尽量不受干扰

		PS-4 : 多层板 VS 打孔

			多层板的不同层之间通信可以打通孔也可以打微孔（或埋孔），打通孔意味着类似针脚的孔，不同层次都可以连接，而微孔意味着有可能在孔上也可以走线，
			比如四层板，F.Cu In1.Cu In2.Cu B.Cu，如果有一个B.Cu到In2.Cu的通孔，并且有一条F.Cu的线必须要经过这个孔的位置才能走通，这时候就需要将B.Cu到In2.Cu的孔
			换成微孔，因为使用通孔首先是浪费且无意义。

	3) 有关电磁兼容性 和 布线规范 的讨论
		TBD
		
	
	布线笔记：

		尽量少打孔，一般针脚都是通孔，可以当做孔用

	4) 其它层的处理？

	其它层都是自动处理的，只要在“电路板设置"中 勾选了这层。

	比如丝印层、阻焊层等等，所以这些层模式都不用处理，让软件自动解决，你只需在设置时勾选这些层

	5) 添加丝印？

	在封装器件上的丝印是自动产生的，但自己的一些描述就需要自己添加，使用’T‘文本工具，在某个空白位置左单击，然后弹出对话框选择层（含义是在哪个层上写文字）
	，选择F.Silks或B.Silks 然后键入自定义文本即可，如“Dumor 330A V1.01"，该文本描述了什么类型的板子、哪个公司的、版本号是多少
	，还可以写日期、时间等更多有意义的信息。

	6) 点击”执行设计规则检查“，开debug
		检查没有发现未连接项目，但出现了很多“焊盘与焊盘靠的太近了”和"微孔：不允许“ 还有若干”过孔太靠近布线了“

		这里只研究“微孔：不允许”的问题，另外两个问题是因为刚开始设计时就没有考虑好，比如用多粗的线？多大的过孔？线与线之间的间距？等等参数问题，
		这要求再布线之前，要把所有参数都设定好再进行，并且打孔时要注意与当前布线之间的距离

		微孔的问题是自己把含义弄错了，举例四层板：F.Cu  In1.Cu In2.Cu  B.Cu

		从F.Cu到B.Cu的是通孔

		从F.Cu到In1.Cu的 或 从B.Cu到In2.Cu的 叫盲孔

		从In1.Cu到In2.Cu的叫埋孔

		理论上这三种孔就可以画任何PCB了，“微孔”是什么呢？ TBD

		PS：该步骤可以在覆铜之后统一检查


### 覆铜

	布线完成之后就要开始覆铜了，覆铜也称铺铜， 就是将PCB顶层和底层 在连线以外的区域铺上铜，铺铜之后PCB看起来，本来凸起的连线，变成了“沟壑”
	,可以想象，整个顶层或底层都是铜，如果有一条A到B点的线，则把A到B点周围的铜都刻蚀掉，于是就成了如下的样子

![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PCB-Wire.png)

	Q&A : 为什么要覆铜？

		覆盖的铜层不是独立存在的，而是要与地线相连的，这也是覆铜最主要的意义。

		那么为什么要覆盖通层连接地线呢？说先要了解一个术语“阻抗”: 

								阻抗 ： 描述当电压和电流按正弦规律变化时，（具有电阻、电容、电感的）电路对*交流电所起的阻碍和抵抗作用*的物理量 --- 《辞海》
																										   --------------------------

										描述在具有电阻、电容和电感的电路里，对电路中的电流所起到的阻碍作用叫阻抗. --- 《百度百科》


										用符号Z表示，单位是欧姆。公式为	Z = R + j*X，这是一个复数公式，实部R表示电阻Resistance、虚部X表示电抗Reactance (容抗+感抗)
										（之所以用复数表示，因为电阻R是耗能元件，而电感和电阻是储能元件，它们必须分开运算）
										
										[Z= R+i( ωL–1/（ωC）)]

										阻抗的公式和电阻很像（瞬时电压V除以瞬时电流I），但还包含了电容和电感,
										另外电阻是不可逆的将电能转换成其他形式能（如热能），而电抗是可逆的电场和磁场之间的转换,
										根据电磁场理论 这个转换过程是与电场和磁场的变化率相关的，体现在信号上就是信号频率，即阻抗中的电抗部分是与信号频率相关的

										下面是电阻、电容、电感的阻抗部分表达式：

										Zr = R
										Zc = 1/(j*w*C)
										Zl = j*w*L

										总结：阻抗中的阻性描述耗散电能，容性与感性描述存储电能，阻抗与频率相关，电阻是阻抗在电抗部分为0的时候的特例，电阻与频率无关

										特性阻抗 ZO, 表示在导线中传输时的阻抗


								阻抗匹配与失配：

									信号源内阻与所接传输线的特性阻抗大小相等且相位相同，或传输线的特性阻抗与所接负载阻抗的大小相等且相位相同，
									分别称为传输线的输入端或输出端处于阻抗匹配状态，简称为阻抗匹配。


									要注意的是，并非阻抗越小越好，而是达到阻抗匹配态最好！

									所以常说的”减小阻抗“，严格来讲应该是”减小阻抗失配“

									常规建议 阻抗匹配应控制在10%以内

								PCB中影响阻抗的因素:

										1. 介质及材料
											PASS

										2. 导线宽度和厚度

											阻抗是瞬时电压和瞬时电流的比值，当电压一定时，更宽和更厚的导线将容纳更多电流，使得阻抗更小

											目前，大多数高频线路和高速数字线路的信号传输线宽 W为0.10或0.13mm。

											线宽控制偏差为±20％

											相比宽度 ，厚度也对阻抗有影响，但相对影响很小

										3. 其它 

		地线的概念?

			地线是电路电位*基准点*的等电位体，

			有人称地线为 “信号回流源的低阻抗路径”

			地线也是存在阻抗的，当电流回流到地线时，因为地线阻抗的存在 会在地线上产生电压，在这个电压的驱动下，
			会产生地线环路电流，形成地环路干扰。当多个电路共用一段地线时，还会形成公共阻抗耦合
			

		在实际的设计中，经常在关键的信号线两边各加一条地线。目的在于提供一个低电感的地回路，
		从而减少相邻线之间的串扰与传导、辐射的影响。但增加了地线的同时，也改变了信号的电磁场分布，降低了信号线的阻抗




		覆铜具有减小地线阻抗、提高抗干扰能力、降低压降、提高电源效率，与地线相连还有助于减小环路面积，
		另外，铜具有散热性，覆铜还有助于PCB板散热

		还有, PCB生产工艺也对覆铜有一定要求，覆铜之后可以保证电镀效果、另外对于布线较少的PCB还能保证层压不变形

		数字地和模拟地分开来敷铜

		透过覆铜，我们可以让接地的区块更大，如此可以为系统提供更好的屏蔽以避免噪声。在我们生活的环境中充满了各式各样的电子讯号，这些电子讯号一旦进入我们的系统就会变成噪声，覆铜让系统接地的部分变多，使得外部的噪声进入系统后容易直接被导入接地，这就是所谓的屏蔽。不只是外部讯号，覆铜也可以减少系统内部的讯号干扰

	Q&A : 所有PCB都要覆铜吗？ 
	
	Q&A : 覆铜的注意事项？ 

	q&a : 覆铜的方式有哪些?

		大面积覆铜 和 网格覆铜

	Q&a : 两面都需要覆铜吗？


	不是只有顶层和底层可以覆铜，也不是覆铜只能接地， 一般信号层的覆铜都是接地， 地层的信号层当然接地， 而VCC层的覆铜是接VCC，如果VCC有5V、3.3V等不同电压，则需划分覆铜

	KICAD覆铜方法：

	首先选中要覆铜的层，然后单击覆铜工具开框选覆铜区域，一般将整个PCB框选，目前在KICAD中没有找到将整个PCB覆铜的方法，还是需要框选一次整个PCB轮廓才行
	款选之前左单击会弹出对话框以设置相关参数，重要的是选择铜层和选择网络，因为KICAD可以通过选择网络自动将覆铜连接（到该网络）

	然后进行框选，框选之后就覆铜完成了！

	然后再选择想要覆铜的铜层，依此类推！

	
	至此所有工作都做完了，可以使用3D工具查看PCB了，但要进行生产前，还需要做下面的工作

### 最后的工作

1. 可以用文本标记每个图层，这个层是供自己维护使用的，比如描述该层是干什么的，特别是对于多层板，我们只能知道哪些是信号层、哪些是电源层，但是什么电源和信号就需要注释解决了
2. 放置十字准线和标记尺寸信息，TBD（还不清楚十字准线的作用）
3. 设置坐标原点（在十字准线工具下面），TBD（坐标原点是为GERBE和砖孔文件使用的，但不知道怎么放）
4. 生成Gerber（或其他格式文件），点击”绘制“图标
5. 生成钻孔文件： 点击文件->制造输出->砖孔文件
6. 生成BOM		  点击文件->制造输出->BOM文件

### TBD
	”高对比度的显示模式“与”高亮网络“工具的使用，使用前者可以凸显当前层的相关元素，而低亮其它层的元素，
	使用后者，点击工具之后，再点击某个电气网络，会看高亮当前的电气连通网络，这在检查和布线时非常有用

	关于电源的布线 ： 电源线 要给所有的元器件提供电源， 所以要足够粗，如果比较细，则可能烧断
	，同样的，驱动板、驱动电路也需要较粗的布线。

	长线与断线、过孔与不过孔、转弯与不转弯 等干扰对比。

	理论上应保证线越短越好、过孔越少越好、转弯越少越好




1. 设定尺寸信息 

	PCB布线和原理图大不相同，原理图中没有体现元件的尺寸和封装信息，第一次体现这些信息是在关联封装时，

	因为尺寸和封装信息直接影响到PCB的生产。

	在进入PCBnew界面后，还需要修改的尺寸信息有[TBD]


	注意：进入PCBnew之后，第一眼看到的网格 往往并不是最小网格单元，（可能是软件或显示器的缘故）在某种放大程度下只显示当前程度的最小单元网格，
		  实际将页面放大之后是可以看到最小网格的，看到最小网格的标志就是，再放大也不出现网格了

2. 设定PCB层数



	导入原理图或读取网络表之后，首先看到的是一团由“飞线”连接的封装器件，
	我们可以通过移动和选装分装器件使得飞线交叉数量减少，飞线交叉数量最少是PCB布线的标准之一

## 术语
1. 网络标签(/网络标号)： 网络标签是原理图中，一个节点与另一个节点的电气连通。在画原理图时，往往并不能将所有的连线都直接连接起来，于是，对于那些
不能直接相连的节点，就需要使用网络标签。比如接口A-1是连接到器件B-3的，但原理图上不好布置这个连线，或处于模块化等原因要分开画，
于是可以在A-1接口放置标签XXYY，B-3接口也放置引出标签XXYY，这样在软件中就建立起了电气连通性
1）对软件来说，建立起了电气连通性，后续生成网络表时会有A-1和B-3的关联数据，以便在PCB中生成使用
2）对看图人员来说也有作用，搜索两个同名标签，就知道他们之间有了电气连通性

2. 全局标签（在PROTEL系列中称为PORT端口）：与网络标签具有同样的功能，并且还具备 方向 和 输入/输出 设定，

在MCU引脚中经常使用全局标签+网络标签，在其它芯片引脚中常使用网络标签

3. SMD
	Surface Mounted Devices， 表面贴装器 或 贴片封装

4. 元件/元件库
	元件是针对原理图而言的，原理图中使用到的“实体“图形就叫元件，比如电阻、电容、74HC574芯片等等...
	，元件库是元件的合集，可以直接调用，元件库一般都会由软件官方提供大部分常用的，如果没有，就需要自己编辑创建元件以丰富这个库，
	资深的PCB工程师肯定也有自己的元件库，这是长年累月累积下来的，所以可以索要并引用。

	当然，不同的软件的元件库一般不通用

5. 封装/封装库
	封装是针对PCB而言的，对应原理图中的元件，一个元件可以有不同的封装，比如一个ATMEGA128芯片，可以有直插封装，也可以
	有贴片封装，一个电容也有各种型号、大小、容量的不同。

	一般原理图画好之后就要关联封装了

	如果一个元件对应的封装在库中没有（比如封装形式没有 或 大小不同 或 形式不同 或 什么样的都匹配 直接没有等等）就同样需要自己
	来编辑创建新的封装，来丰富这个库 

	***
	要注意，查找封装跟查找元件方法是不同的，当在元件库中搜索元件时，一般直接搜索名字即可，比如电阻搜索R，电容搜索C，电感搜索L，
	芯片直接搜索其名称，比如74HCT574等等。

	但是封装不是通过这些名称查找的，比如74HCT574，这个芯片可能有多种封装方式，比如贴片的、直插的等等，并且还跟尺寸、大小，引脚数
	都有关联，所以查找/关联封装，实际上关注的信息是：
		*封装方式、引脚数量、尺寸信息*

	在英文库中搜索封装方式，首先必须清楚都有哪些封装，其次各种封装对应的英文要知道

		比如330A主板上有一个HC574芯片，首先肉眼观察能知道是什么封装，比如是SOIC（这就需要功底了），然后在封装库搜索SOIC，在KICAD
		的封装库中，列出了不同SOIC封装的信息，因为该芯片有20个引脚，所以找SOIC_20W开头的，找到之后再对应尺寸信息，
		尺寸信息还包含两种：长x宽（有些也需要高度信息），然后是针脚之间的间距信息，这一点也非常重要

		最后找到的封装为：SOIC-20W_7.5x12.8mm_P1.27mm。含义为：SOIC封装、20个针脚、宽x长=7.5*12.8mm，针脚间距为1.27mm

	像封装和针脚一般都是肉眼可见的，但尺寸怎么搞呢？首先能查到手册的先用手册，还不确定的 就需要采购信息了！联系卖家或公司采购，或者公司老员工才能知道具体信息

	注意：有些芯片根据不同的信号可确定其封装形式，如MAX232DR，是SOIC封装的，而MAX232N是PDIP封装、MAX232NSR是SOP封装的




8. 焊盘
	表面贴装元件的基本构成单元，用于焊接元件，在做元件封装时就需要放置焊盘





## KICAD库搜索

原理图符号库+电源库

conn 为引脚库前缀，如Conn_01x11_Female 表示1排 11针脚 母口
L	 为电感库
R	 电阻库
C	 电容库
CP	 极化电容
D	 二极管
LED	 发光二极管
VCC	 电源库
GND	 地库
LMxxx 放大器库，这与芯片系列相关
R_v  可变电阻

芯片相关的，直接搜芯片名

GND的种类
	GND					-	标准地 符号
	GNDA				-	GND 'Analog'， 即模拟地，通常用于AD转换中
	GNDD				-	GND 'Digital'，即数字地，通常用于DA转换中
	GNDPWR				-	GND 'POWER'	， TBD
	EarthGND			-	大地，直接连入大地的端口
	GNDClean			-	GND ‘Clean‘， 该地可以阻值噪声，以保证敏感器件的正常运作
	Protective Ground	-	用于保护人的地（而不是连接该地的器件）

	*注意! 不同名称的地（电气）不连接！！ *

## KICAD相关
1. 只要放置了全局标签，那么就要有对应的连接，这个跟网络标签是一样的
2. KICAD的电源
	对于任一类型电源，都需要加PWR_FLAG，目的是告诉KICAD，电源是从某个地方进来的
	注意，GND 也是电源
	在原理图上使用的任何GND和VCC库符号，都属于“输入”电源类型，即表示：将电输入到芯片 或 将地输入到芯片
	所以PWR_FLAG其实是代表“输出”，如它可以表示电是从开关电源输出而来的
	加上PWR_FLAG的方法就是直接在电源库中找到它并且直接连接上各种GND和各种VCC

	比如AVR芯片有AVCC输入也有VCC输入，所以就算建立了AVCC到另一个AVCC的电气连接，DEBUG时也仍然报错“引脚连接其它引脚，但不受任何引脚驱动”
	，解决的方法就是给AVCC也单独加一个PWR_FLAG

![PWRFLAG](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWR_FLAG1.png)
![PWRFLAG](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWR_FLAG2.png)

	特殊的问题：
![PWRFLAG](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWR_FLAG3.png)
	如图，这里不加PWR_FLAG时，DEBUG时就如上错误，当不加PWR_FLAG而去掉上拉电阻时也消除了错误，
	这里原因不明，上拉电阻是不能却的

	猜测可能跟我选择的器件有关，因为图库里没有STC809，其实是TCM809，有可能该器件就需要直接接电源，否则是错误的

	[追加，猜测错误，自己封装了一个元件，结果也是一样的，难道是引脚定义的缘故？？,  其它元件有VCC引脚的，都是直接连接VCC，所以无法对比，暂时妥协，加入PWR_FLAG]

## 关于KICAD的分层处理
	当一个项目较大，当前原理图界面不容易摆放处理时，可以使用分层
	，目的是使用层次结构管理这个项目，
	这样做可以使项目清晰，并且很方便打印处理（比如本来需要在一张A1上画的原理图，可以拆分在几张A4中画）

	关于层次结构，最重要的两件事（核心）：A。如何建立字表  B。如果在子表之间建立电气链接

	A: 
		菜单栏：放置->层次图框，双击当前原理图任一位置，弹出“原理图框属性”对话框，可以修改文件名、图层名文本尺寸等
		，实际上，这是建立摘要的过程，本质就是一个ID。
	
		通过双击刚刚建立的层次图框或者使用分层导航器，可以很方便进入到新的原理图（子表）中画图

		层次图框是要加入“层次引脚"的，所以要适当的大小，(添加层次引脚的方法是先点击“添加图框层次引脚”，然后点击刚刚建立的层次图框（内），弹出对话框输入图框引脚名即可)

		另外，子表还可以建立子表，以此类推

	B：连接的方法是 “层次引脚”和“层次标签”
		其实这两个词是一种概念，只是针对的对象不同，

		层次引脚是针对“发起方”而言的，比如一个表1想与表2建立电气连接，那么表1就需要建立“层次引脚”，而表2要使用“层次标签”，
		表1的每个层次引脚是对应表2的每个层次标签的（如果只是一对一时）

		这里的表2是表1的子表，表1是表2的父表，也就是说父表向任一子表发起电气连接，都必须通过层次引脚（如上，在对应子表的分层图框中建立即可）
		，然后对应的子表中建立同名的层次标签，这样就建立起了父表与子表之间的电气连接

		当然，如果使用“标签”，即全局标签，那么全局标签将贯通所有层次的父子表（含根表），无需特别操作

	
	最后：如果不建立子表，那么根表中应使用全局标签。层次标签仅在建立子表时才使用。
		  删除子表，只需在父表中框选对应的分层图框，删除即可



### KICAD 电路仿真

	KICAD嵌入了NGSPICE模块，SPICE是全球著名电路仿真软件

	可以在原理图中搭建电路，比如欲测试一个三极管的特性，可先自行组装电路，然后使用仿真工具的电流表、电压表、示波器等进行测试仿真

	也可以直接仿真你所画的原理图

	使用SPICE需要一定的专业性，比如允许你输入一些特定的指令来实现具体功能

	
	对于学习仿真来讲，可以采用Multisim软件，该软件也是调用SPICE，但将其封装成更加易用的形式
		

	仿真：在器件的IBIS MODEL或SPICE MODEL支持下，利用EDA设计工具对PCB的布
	局、布线效果进行仿真分析，从而在单板的物理实现之前发现设计中存在的EMC问题、
	时序问题和信号完整性问题，并找出适当的解决方案


</div>
