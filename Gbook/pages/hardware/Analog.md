
# Chapter 0. 基本线性电子元件(Basic linear electronic element)：电阻、电容、电感


## 电容 (capacitance)

存储电荷(物质带电量)的元件，基本构造为：两块接近且平行放置的金属板分别连接电源两极；原理为：当未通电时，两块接近的金属板正负电荷量相等，呈电中性。如果仅正极通电后，连接正极的金属板A中的电子流向电源正极，由于没有形成通路，（电子往返于金属板与电源之间）最终金属板A仍呈电中性。如果仅负极通电，则电源负极的电子流向金属板B，由于没有形成通路，最终金属板B仍呈电中性，

对AB通电，B中流入电源电子，A中电源电子流向电源，同时B中电子对A中电子产生排斥作用，进一步使得B中电子增加，A中电子减少。此时形成从A到B的电场

电容越大，容纳电荷量越多，增加电容容量的方法有三种：
1. 增加极板面积
2. 减少极板之间距离
3. 在极板之间放入特殊介质（这种介质可以在极板间电场形成时，对A面形成负电荷，对B面形成正电荷，这样A面将进一步排斥电子，B面将进一步吸引电子，从而使容纳电荷量更多）


电容特性：通交流，隔直流。

本质上，B中的电子永远不会走到A中，因为实际上没有连接成通路，但如果给电容通交流电，那么会形成对电容的周期性充放电过程，对于电容的另一侧而言，虽然是自己的电子在往复运动，但仍然形成了周期性电流（电子的流动形成电流），所以达到了“通交流”的效果。隔直流是因为直流电不会导致电容周期性充放电（仅在第一次上电时充电一次），所以电子不会周期性往复运动，不会形成电流。

电容的应用：

	对电容的应用，来源于其核心特性和基本功能，即通交流隔直流和存储电荷，所以应用场景有：滤波、去耦(或旁路)和储能。

	去耦和旁路及储能：
		在直流系统中（比如直流电路板中），理论上总是走平稳的直流电的，但实际应用中直流电源总是被电磁噪声干扰者，产生不稳定的直流电源（比如高电平不总位置再5V），电源的偏低和偏高都会对半导体器件造成对执行的严重误判，
		为了消除噪声，会在IC器件的信号输入端接入电容（信号线经电容接GND），使得不稳定部分（当作交流电处理）通过电容流入GND，一般将处理输入到IC的信号的电容称为旁路电容（如输入信号、IC电源等），将处理从IC输出的信号的电容称为去耦电容。
		因为负载的实际使用情况大多也是不固定的，所以可能造成IC供电不稳定，这是旁路电容存储的电荷发挥了作用，因为电容的放电速度非常快，可以快速补偿IC的用电，这时旁路电容就像一个临时缓冲区，随时补偿IC用电，使得IC工作稳定。	
		在电路PCB设计中，要将电容放置到离IC相关引脚很近的地方。

		去耦电容一般比较大, 10uF/更大？
		旁路电容一般比较小，0.1uF/0.01uF?
		选择公式？

	滤波：
		仍然利用通交流隔直流的特性，所以去耦、旁路和滤波的本质都是一样的，用大电容过滤低频？用小电容过滤高频？

电容的单位是法拉，简称法，符号F(Farad)，对于电容，F是一个很大的单位(=10^3uF)，一般电路中使用的都是微法uF(=10^3nF)、nF(=10^3pF)、pF单位。电容在电路中使用C表示。

电容极性：
	电容分为有极性电容和无极性电容

	根据工艺复杂程度、容量大小等制作出了各式各样的电容，如铝电解质电容、瓷片电容、独石电容
	






















# Chapter 0. Preface

## 0.1 电信号

随时间变化而变化的电压u或电流i ： u = f(t) or i = f(t).

### 0.1.1 数字信号和模拟信号 

模拟信号对应于任意时间t值，均匀确定的函数值u或i。数字信号在时间和数值上均有离散性，u或i的数值是一个以某个最小整数值为基值的倍数，当实际信号数值在N和N+1之间时，则根据所设定的阈值将其确定为N或N+1，N与N+1之间的数值没有意义。

几乎所有物理量都是模拟信号，为计算器要处理物理量则需进行模数转换，处理后再根据需求转化为模拟信号驱动负载。

## 0.2 电子系统

电子系统由：信号提取系统、信号处理系统和信号驱动系统组成；

### 0.2.1 信号提取

被提取的信号来源于各种物理量的**传感器**或**信号发生器(用于测试)**。来自传感器的信号其幅值（通常）很小、噪声大且易受干扰，因此需利用隔离、滤波、阻抗变换等方法将信号提取，并进行放大。

### 0.2.2 信号处理 

当信号足够大时，执行信号的运算、转换、比较等不同的加工。若要进行数字化处理则需通过A/D转化电路将处理后的模拟信号转换为数字信号输入至数字系统。

### 0.2.3 信号驱动

经过处理的信号一般还要经过功率放大以驱动负载，若是经过数字化处理的，则需通过D/A转化电路将数字信号转换为模拟信号再将其功率放大。

## 0.3 模拟电路

对模拟信号的最基本处理是**放大**，并且放大电路是构成各种模拟电路的**最基本电路**。


常用模拟电路			| 功能描述
:-:						| :-:
放大电路				| 用于信号的电压、电流或功率的放大
滤波电路				| 用于信号的提取、变换或抗干扰
运算电路				| 完成信号的加减乘除积分微积分对数指数比例等各种运算
转换电路				| 电流与电压信号的转换、直流与交流信号的转换、直流电压与频率的转换等等
发生电路				| 用于产生正弦波、矩形波、三角波、锯齿波
直流电源				| 将交流电转换成不同输出电压和电流的直流电，作为各种电子电路的供电电源

## 0.4 电子系统组成规则

电路应尽量简单，元器件数、连线、焊点数越少越好，能用集成电路就不用分立元件、能用大规模集成电路就不用小规模集成电路。这样可以使故障率最低、系统可靠性增强。另外要考虑电磁兼容性，即：既能抵御周围电磁场的干扰，又能较少的影响周围环境，通常采用隔离、屏蔽、接地、滤波、去耦等技术来获得较强的抗干扰能力。必要时应选用抗干扰能力强的元器件。

要注意，设计电路和选择元件时要统筹考虑，权衡利弊，满足设计要求是主要目的，不要盲目追求某单一方面性能特别优秀，因为对于多数电子电路，当其某些方面性能改善时，另一方面的性能往往遭到破坏。其次能用通用元件实现的就不用专用型元器件。只有当系统电路结构正确，但性能不满足要求时才考虑更换所选的元器件。


## 0.5 其它

误差与估算：由于半导体器件性能参数的分散性和对温度的敏感性，精确的计算通常没有意义。所以通常要近似计算，但要近似的有道理。 估算不同的参数需采用不同的模型，模拟电子电路的特殊性表现在具有非线性特性的半导体器件，通常在求解模拟电子电路时需要将其转换为线性元件组成的电路（即等效电路），不同的条件、解决不同的问题，应构造不同的等效模型。

基本概念、基本电路、基本定律、基本分析方法。

从实际出发，没有最高的电路只有最合适的电路。当改善电路某些方面的性能而采取某些措施时要自问：这种措施还改变了什么？怎么变化？能容忍吗？因为一个电子电路是一个整体，各方面性能相互联系，通常“有一利将有一弊”，不能顾此失彼。


电路仿真辅助软件：SPICE


# Chapter 1: 常用半导体器件

半导体器件是构成电子电路的基本元件，所用材料是经过特殊加工的、性能可控的半导体材料。

## 1.1.1 本征半导体

纯净的，具有晶体结构体的半导体称为本征半导体。

物质的导电性能决定于原子结构，导体一般为低价元素(最外层电子数一般小于4)，其最外层电子容易脱离原子核束缚成为自由电子并在外电场的作用下产生定向移动进而形成电流。高价元素或高分子物质其最外层电子受原子核束缚力很强，很难成为自由电子，导电性极差，所以称为绝缘体(最外层电子数一般大于4)。

注：原子结构、物质导电能力等知识可以在化学课本中找到答案

常用的半导体材料Si硅和Ge锗都是四价元素，最外层电子受原子核的束缚力介于导体和绝缘体之间，导电性能也介于两者之间，因此通过向其晶体中掺入特定的杂质元素可以使其导电性可控，那么就容易形成开关（1或0）,因此半导体可以制作成各种电子器件。

本征半导体晶体形成稳定的共价键结构，具有很强的结合力，受温度影响下有少数电子因热运动而获取足够能量挣脱原子核束缚成为自由电子，自由电子的挣脱导致对应的原子带正电，被挣脱的位置称为“空穴”，电子带负电、空穴带正电，在本征半导体中空穴和电子成对出现。

如果此时在半导体两端加一个电场，则在电场力的作用下，电子产生定向移动，另一方面由于空穴的存在，价电子会依次添补空穴，这就相当于空穴在反向移动，本征半导体中的电流是两种电流的和。

<-.<-.<-.<-.<-.<-.<-.<-.	o->o->o->o->o->o->o->o->
<-.<-.<-.<-.<-.<-.<-.<-.   	o->o->o->o->o->o->o->o->
<-.<-.<-.<-.<-.<-.<-.<-.   	o->o->o->o->o->o->o->o->
<-.<-.<-.<-.<-.<-.<-.<-.   	o->o->o->o->o->o->o->o->
<-.<-.<-.<-.<-.<-.<-.<-.   	o->o->o->o->o->o->o->o->
<-.<-.<-.<-.<-.<-.<-.<-.   	o->o->o->o->o->o->o->o->
<-.<-.<-.<-.<-.<-.<-.<-.   	o->o->o->o->o->o->o->o->
电子电流				 + 	空穴电流

运载电荷的粒子称为载流子，本征半导体中的两种电子和空穴都参与导电



本征半导体在热激发下产生自由电子和空穴的现象称为本征激发，电子在运动过程中遇到空穴就会添补，这种现象称为复合，在一定温度下，本征激发所产生的自由电子与空穴对，与复合的自由电子与空穴对数相等，达到动态平衡。即一定温度下本征半导体的载流子浓度一定，并且电子与空穴浓度相等。

如果温度升高则浓度增加，反之降低，本征半导体载流子浓度是环境温度的函数:Ni=Pi=f(t);


本征半导体的导电性能差，且与温度密切相关，利用半导体材料性能对温度的敏感性可以用来制作热敏和光敏元件，这也是造成半导体器件温度稳定性差的原因。


## 1.1.2 杂质半导体

通过扩散工艺在本征半导体中掺入少量的杂质元素即可得到杂质半导体，按参入杂质元素不同可形成N（negative）和P（positive）型半导体。控制参入杂质的浓度就可控制杂质半导体的导电性。

### N型半导体

在本征半导体中掺入最外层有5个电子的磷元素，这样磷元素容易和晶体形成共价键而多出一个自由电子，磷原子因与晶体形成共价键而成为不能移动的正离子，N型半导体中自由电子数量大于空穴数量，自由电子称为多数载流子（多子）、空穴称为少数载流子（少子）。由于杂质原子可以提供电子故称之为施主原子，参入杂质越多,多子浓度越高，导电性能越强。

### P型半导体

在本征半导体中掺入最外层有3个电子的硼元素，这样硼元素容易和晶体形成共价键而多出一个空位，晶体原子添补该空位后就形成了空穴。硼元素因与晶体形成共价键而成为不能移动的负离子，P型半导体中空穴数量大于自由电子数量，空穴为多子，自由电子为少子，硼为受主原子，参入杂质越多，多子浓度越高，导电性越强。


### 结论

P和N型半导体，杂质使多子浓度大大增加，从何与少子复合的几率就增加，因此对于杂质半导体，多子的浓度越高，少子的浓度就越低，多子的浓度约等于所掺入杂质原子的浓度，多子受温度影响很小，而少子是本征激发形成的，尽管浓度很低却对温度非常敏感，这将影响半导体性能。


### PN结

物质总是从高浓度的地方向低浓度的地方扩散（扩散运动），当把P和N型半导体制作在同一块硅片上时，它们的交界面就形成PN结，在交界面处两种载流子的浓度差很大，因而P区的空穴和N区的自由电子必然向对方扩散，因扩散运动导致交界面处的多子浓度下降，又因P区硼原子成为了不能移动的负离子、N区的磷原子成为了不能移动的正离子，因此交界面处形成内电场，称为空间电荷区，随着扩散运动的进行,空间电荷区加宽，同时内电场加强，内电场力刚好与自由电子方向相反，进而阻止了扩散运动的进行，

在内电场的作用下，P区的少子-自由电子（实际上是从N区扩散来的比较多）与N区的少子-空穴做反向运动（漂移），如此往复最终达到动态平衡，形成PN结。扩散电流等于漂移电流（因为实际上就是自由电子的往复运动，同一批自由电子当然电流相同）

空间电荷区的电压为Uho，电流为0，空间电荷区内正负离的电量相等，当P区域N区的杂质浓度相等时，负离子与正离子区宽度也相等，即电荷数量相等，称这种PN结为对称PN结，如果暂支浓度不等，则称为不对称PN结，这两种结对外的特性是相同的。


绝大部分空间电荷区内的自由电子和空穴都非常少，在分析PN结时常忽略载流子的作用而只考虑离子区电荷，这种分析方法称为“耗尽层近似”，故空间电荷区称为耗尽层。


#### PN结的单向导电性

如果在PN结两端施加电压就会破坏PN结的动态平衡，因为外电压（电压的本质是电流，电流的本质是电子的移动）存在，导致电子数增多，所以漂移电流不再等于扩散电流，施加外电压的极性不同导致PN结的单向导电性。

1. 当给PN结P区接电源正极、N区接电源负极时（这时称“正向偏置”或正向接法），由于电源电子流是从负极流出，那么N区的自由电子将增多，扩散运动加剧，PN结耗尽层变窄（或消失？），打破原来的动态平衡，由于电源的作用，扩散运动源源不断的进行，PN结将导通。 从电场的角度讲，PN结接入电源后外电场的力大于内电场，导致导通（我不喜欢这种说法，如果只从电场角度说，那么扩散运动不管怎么加剧，PN结自由电子数量都是有限的）

PN结导通时压降只有零点几伏（可见阻抗非常小），所以在回路中要注意使用电阻以限制回流电流，避免PN结（和电源）烧毁。

2. 当给PN结N区结电源正极、P区接电源负极，（这时称“反向偏置”或反向接法），由于电源电子流是从负极流出，那么P区的空穴就会减少，同时N区的自由电子流向电源正极，N区的自由电子也减少，这时扩散运动减小（直到停止），PN结的耗尽区变宽， PN结处于截止状态。

#### PN结电流方程

TBD

#### PN结伏安特性

通过PN结电流与加在两端的电压的曲线特性：PN结的伏安特性。u>0的部分称正向特性、u<0的部分为反向特性，当反向电压超过一定数值（Ubr）反向电流急剧增加，称为反向击穿，分为齐纳击穿（高掺杂、耗尽层很窄时）和雪崩击穿（低掺杂、耗尽层很宽时）。


TBD

#### PN结电容效应

分为扩散电容和势垒电容

势垒电容Cb：PN结的外加电压变化时，耗尽区宽度变化，耗尽层电荷量发生变化，这与电容充放电过程相同，称为势垒电容，电容大小与结面积、耗尽层宽度、半导体介质常数、外加电压等都有关系。

反向电压，对（高掺杂）PN结的耗尽区变化控制更为明显，因此可以制作成各种变容二极管。

扩散电容Cd：PN结外加正向电压时，耗尽层宽度变化，P区和N区的剩余宽度也在变化，其电荷量也在发生变化（非平衡少子浓度），这与电容充放电过程相同，称为扩散电容，电容大小与电流、电压、费平衡少子寿命等有关。

Cb和Cd一般很小，（结面积小的为1pF左右，大的有几十到几百pF。 1F=1000mF=1000 000uF=1000 000 000nF= 1000 000 000 000pF）只有高频信号才考虑结电容的作用，低频可忽略不计。

## 1.1.3 二极管

将PN结用外壳封装起来，加上电极引线就成为二极管，P区引出阳极、N区引出阴极。

将PN结结点做小，结面积小，结电容就小，就可以制作成适用于高频电路、小电流的二极管（高频电路、脉冲开关、小功率整流）。

将PN结结点做大，结面积大，结电容就大，就可以制作成适用于低频电路、大电流的二极管（低频电路、大功率整流）。


### 二极管伏安特性












[关于电阻的思考：电阻是耗能元件，而电压的本质是**电源所连接的电路中所测量的两个点之间的电子数量差**，将电阻与电源串联，那么将有一部分电子被电阻消耗，电阻另一端的电子数量就会变少，电源与该点开始存在电压差，该点的电压降低，所以说串联电阻分压了]

[给电源串联一个电阻通常是有必要的，如果没有用电器那一定要串联，设想一个电源的正负极用几乎没有电阻的导线相连，那么电子无限的从负极流向正极，电流相当于无限大（欧姆定律可知），大电流会击穿电源烧毁电路]
































































# concept
模拟电子技术（Analog Electronics Tec.）是以半导体为基础材料、以电荷移动为基本原理的模拟信号放大技术。本质是研究能量的控制，结果是功率（不失真）的放大
# 电子技术的发展

	关键词：电子管-晶体管-集成电路-大规模-超大规模
	----------------------------------------------

1947 晶体管 - 贝尔实验室
1958 集成电路
1969 大规模集成电路
1975 超大规模集成电路

第一片集成电路只有4个晶体管，1997年有40亿个
预计2020年达饱和

# 模拟信号与模拟电路

	关键词：连续/时间&空间有意义/放大（能量控制）/有源元件/功能和性能(细节)分析
	---------------------------------------------------------------------------

	重点：基本概念/基本电路/基本分析方法/全面分析(副作用分析），适用的才是最好的
	--------------------------------------------------------------------------
		四个会：会看(读图/分析)/会算/会选(电路 器件 参数)/会调
		-----------------------------------------------------

数字信号：离散性（时间和数值）
模拟信号：连续性（时间和数值），几乎所有物理量都是模拟信号，如温度
			  压力等，任何瞬间的任何值都有意义

模拟电路：最基本的处理是对信号的放大，放大的本质是能量的控制
			传感器/AD转化的信号基本上都是小信号，它们不足以驱动负载/传输/转化，所以要进行放大

	有源元件：能够控制能量的元件

# 常用半导体器件

## 半导体基础知识
1. 本征半导体
	半导体：绝缘体 mid 导体
			导体的最外层电子容易脱离原子核束缚（通过电场/温度等）,   最外层电子<4
			绝缘体最外层电子不容易脱离原子核束缚				     最外层电子>4
			半导体-四价元素，Si Ge，电子被束缚力介于导体与绝缘体之间 最外层电子=4

			原子核：正电
			电子：负电

	关键词：原子结构（核正子负，最外2/8稳定，4为半导体，其它结构易失/得）/Si Ge/本征无杂质-共价键
	---------------------------------------------------------------------------------------------
			拓展 : 化学-原子
			----------------

	关键词：少子/多子 载流子 自由电子/空穴 热运动 (绝对温度0度不导电）
	-----------------------------------------------------------------
			拓展：物理 - 热力学
			------------------

	本征半导体受温度影响 自由电子脱离共价键束缚成为自由电子 形成空穴
	在温度一定下，自由电子浓度一定
	温度升高，热运动加剧

2. 杂质半导体
	本征半导体受电场和温度影响，载流子很少，导电性很差
	参如3价和5价的元素掺入本征半导体，将改善导电性能

	N型半导体：本征加入P磷，破坏共价键，增加一个P就增加一个自由电子，此时自由电子成为多数载流子,空穴为少数
	P		 :         B硼,             吸收电子					,    空穴成为多数载流子，自由电子为少数

	关键词：5价/P磷/3价/B硼/N型半导体(Negative -)/P型半导体（Positive +）
	--------------------------------------------------------------------

	杂质半导体，仍然受温度变化，但受温度变化自由电子和空穴浓度仍然一定，重要的是在N中空穴比例小，温度变化
	后对空穴比例浓度影响最大，P中自由电子比例小，温度变化后自由电子比例浓度影响较大

	重点：少数载流子是影响半导体器件温度稳定性的主要因素
	---------------------------------------------------
	关键词：温度/比例浓度
	---------------------

3. PN结的形成及其单向导电性

在一块本征半导体基片上，做成PN结(两端根据扩散原理掺入不同杂质)，注意，不是将一个P半导体和N半导体按压到一起！！
,这样它们的交界界面就形成空间电荷区，成为PN结

	制作成的PN结，仍然受扩散运动的影响，P区的空穴向N区扩散，N区的自由电子向P区扩散，
	（实际上空穴是假想，实际是电子运动)

		NONE			  P			   		  N
	-----------		| +++++++++	|	   	|-----------|
	-----------		| +++++++++	|	   	|-----------|
	-----------		| +++++++++	|	   	|-----------|

	N区电子运动到P区与空穴复合，因为复合后P区接触面开始带负电，N区开始带正电，导致PN结形成内电场
	内电场将组织自由电子的复合，并且反向运动，如此反复以形成稳定的区域
	
		NONE			  P			   		  N
	-----------		| +++++++++	|	   	|-----------|
	-----------		| +++++++++	|	   	|-----------|
	-----------		| +++++++++	|	   	|-----------|
	

	在空间电荷区（接触面）N区的自由电子向

	关键词：空间电荷区/PN结-扩散运动-内电场-漂移运动-动态平衡
	--------------------------------------------------------
	拓展：物理-热力学
	----------------

	给PN结通电，会打破动态平衡，释加正电压会削弱内电场（耗尽层变窄），进而扩散运动加剧，PN导通
	正电压是指P区接正极，N接负极，因为电流的流动实际是电子的移动，即从电池的负极流出电子，而
	负极接N区，导致N区电子增多，进而削弱了内电场，最后导通PN结

	如果反向给电，效果相反，即电池的电子流向了P区，使得复合了很多空穴，增加了内电场，使得耗尽区变大，PN不通

	关键词：外电场/削弱-增强/导通-截止/耗尽区/正向-加剧扩散/反向-加剧漂移
	---------------------------------------------------------------------
	拓展：物理 - 电荷运动
	--------------------

4. PN结的电容效应
	势垒电容 : PN结外加电压时 空间电荷区宽度变化，有电荷积累和释放过程，与电容充放电向相同，其等效电容为////
	扩散电容： PN结外加正电压时，在扩散过程中在刘子浓度和梯度都有变化，也有电荷累积和释放，其等。。。。

	结电容 =势垒电容 + 扩散电容

	结电容不是常量，PN结外加电压频率到一定程度将失去单向导电性

	关键词：势垒电容 扩散电容 结电容 限制电压频率
	--------------------------------------------
	总之，pn结的扩散电容与其势垒电容不同。前者是少数载流子引起的电容，对于pn结的开关速度有很大影响，在正偏下起很大作用、在反偏下可以忽略，在低频时很重要、在高频时可以忽略；后者是多数载流子引起的电容，在反偏和正偏时都起作用，并且在低频和高频下都很重要

## 二极管	
	单向导通性
	伏安特性

	非发光二极管在电路中的电压在1V～2V之间，当电流在5～20mA时会发光，否则不发光
	发光二极管在电路中的电压为0.7V

	当二极管两端的电压小于0.5(约)时不导通，达到O.5V之后导通

	当二极管两端电压反向，且大于击穿电压时导通

	Tips：伏安特性曲线

	------

### 稳压二极管
	反向连接，且反向电压大于稳压电压时，该稳压二极管具有稳定电压的作用

	Tips：稳压二极管电路 ： 二极管 + 电阻的串连电路 （其中二极管反向连接）

	稳压二极管利用了二极管的伏安特性中的反向性质：当反向电流达到一定值时，（反向）电压是稳定的。

	要注意的是，反向电流一定在Max和Min之间，Min是二极管反向时刚刚导通时的电流，Max是二极管刚好击穿时的电流

	Tips : 两种稳压电路的区别（二极管+电阻 VS 电阻+二极管）

### 整流二极管
	用于将交流电变成（脉动）直流电

	利用到了二极管的单向导通特性

	当交流电的正弦波通过二极管时，每个正弦波的180～360度的相位被过滤掉，即变成了脉动直流电

### 开关二极管
	利用到了二极管的单向导通特性

	这种二极管比普通二极管的开关速度快（即 导通-截止 状态切换快）

	用于器件的保护，防止反向电流的通过
	

	




散装知识点
---------

## 去耦电容/退耦电容

https://www.youtube.com/watch?v=KKjHZpNMeik

位置 ： 放在元器件连接VCC电源之间 和 元器件信号输出端， 去耦电容和旁路电容（放在元器件的信号输入端）相对应

耦合-辞海 : 两个元素/量之间,其中一个量的变化,导致另一个元素/量的变化的一种关系

噪声-辞海 ：信号中 随机变化的 无用的 信号成分。

电路中安装在元件的*电源端*的电容，此电容可以提供比较稳定的电源，同时也可以降低元件耦合到电源端的噪声，间接可以减少其他元件受此元件噪声的影响

去耦电容，是影响了 电源 和 元件 之间的耦合，滤除了电源上的干扰信号，使电源信号稳定, 继而是连通该电源的元器件用电稳定

Q&A:
1. 为什么要去耦？
	A：当一个电源端连接多个元器件供电时，每个元器件的工作都要动态的吸收电流，时多时少，多个元器件一起工作更会影响电源的稳定（直流的波形开起来像交流），这不但会影响元器件的供电，
	也会产生电磁噪声影响周围系统，是元器件和周围系统产生错误的信号，所以在电源向元器件的输出端加上一个电容（称为去耦电容），用来减小或消除影响。

	B: 当元器件输出信号时

2. 为什么电容能去耦？
	去耦原理 ：因为电容是储能元件，当电压突变高时电容吸收多余电量，当电压突变低时电容释放存储电量补充

3. 选型与放置
	基本原则：最小化电阻(ESR)、最小化电感(ESL)

	电容还具有阻抗和电感属性，对于电阻而言无论频率如何都呈固定阻抗，对于电感而言随着频率的增加而增强
	容量选型：
		电容式储能元件，当在电源端用作去耦功能时，还可以实现“蓄能”功能，即用来补偿电源的长期偏差（长期偏差可能是开关电源到PCB电源的距离较远，且负载较大，导致长期供电不足）
		，如果需要补偿电源的长期偏差，则需要大量存储电荷，即选择大容量去耦电容

	种类选型： 陶瓷电容 具有很小的阻抗和电感，其次是钽电容 ， 另外贴片电容的效果更好

	放置    ： 电源 - 去耦电容 - 地，三点一线，呈最佳效果

![decoupling capacitor](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/去耦电容位置.png)

	去耦电容可以并联使用(相同/不同容值)，已达到更好的去耦效果






## 牛屎芯片/牛屎封装
DICE:
DICE 也叫 CHIP 或裸片，是没有封装的芯片
(常见芯片是黑色的矩形外壳，四周或者下面会引出许多金属脚，这种芯片就是标准封装。标准
封装已经规定好引脚的位置和大小，这样进行产品开发时候只要知道用的是什么封装就知道电路板
应该怎么布线)
这种芯片需要通过一种叫 BONDING（邦定）的方法将芯片上的引脚用非常细的线连出来,，再点上胶直接固定在电路板上

另外有的时候担心产品的程序被人复制，这样比用标准封装程序被复制的难度要大许多，标准封装只能依赖单片机
自身的防复制功能和把上面的丝印磨掉不让别人知道是什么型号的单片机来进行


现代诸多电子产品的 PCB 板上看到纽扣大小的黑色芯片,大家管它叫做“牛屎” 。其实它真正的学名叫
做绑定(bonding )，也就是芯片打线,芯片覆膜,音译为邦定， 是“ bonding ”的音译，是芯片生产工艺
中一种打线的方式，一般用于封装前将芯片内部的电路用金线与封装管脚连接。一般 bonding 后(即电路与
		管脚连接后)用黑色胶体将芯片封 装, 同时采用的外封装技术 COB(Chip On Board),这种工艺的流程是将
已经测试好的晶圆植入到特制的电路板上， 然后用金线将晶圆电路连接到电路板上，再将融化后具有特
殊保护功能 的有机材料覆盖到晶圆上来完成芯片的后期封装。
![牛屎芯片1](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/牛屎芯片.jpeg)
      
使用邦定技术的芯片又叫 “裸芯” ， 即半成品芯片。 由于本身已经具备了最基本的控制功能, 所以在
刚开始使用时与封装芯片并没有什么不同， 但由于省去了很多后续工序， 如没有增加 必要的保护电路，它
的使用寿命与稳定性都要比最终完工的封装 IC 集成芯片低很多，一旦坏了没得维修，一般只有整个报废，
其成本也只有硬封装 IC 集成芯片的 1/2到 1/3。

![牛屎芯片2](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/牛屎芯片2.jpeg)

第一，牛屎芯片的封装工艺环境天生就不够塑料封装好，起码滴胶工艺的净度就绝对比不上正规硬封装厂家
的芯片。
第二，牛屎芯片的缺点，底衬不能很好的焊接或者是焊接不牢靠、受热受潮或者是受冷冻之后底衬可能会接触不
良、黑胶密封性差、对潮湿环境和静电抑制能力差、易老化、损坏无法维修。
第三，牛屎芯片的优点就是开发周期短、封装成本低、适用于比较简单的电路。
第四，同一个等级的芯片，用牛屎封装同用塑料封装，肯定是塑封好。牛屎的故障率肯定比正常的塑料封
装要高

## 逆变器
逆变器一般有6个功率晶体管（q1~q6）组成，分为上臂/上桥（q1、q2、q3）和下臂/下桥（q4、q5、q6）
它有将直流转换为三相交流 和 控制电流导通的开关功能。

## 缓冲器
缓冲器分输入缓冲器和输出缓冲器两种。前者的作用是将外设送来的数据暂时存放，以便处理器将它取走，后者的作用是用来暂时存放处理器送往外设的数据。有了数控缓冲器，就可以使高速工作的CPU与慢速工作的外设起协调和缓冲作用，实现数据传送的同步。由于缓冲器接在数据总线上，故必须具有三态输出功能。
74HC244是缓冲器的一种
该芯片用于数据同步以解决MUC与外设速度不匹配的问题，同时增强MCU的负载能力以驱动更多外设，又因其具有三态门，故还有隔离保护功能。

## 继电器
1. 光电耦合器
optical coupler
简称OC

又叫光电隔离器，简称光耦

它将发光器和受光器封装在一个管壳内，来实现无接触式/绝缘式的 电 - 光 - 电 的转换

发光器通常是一个发光二极管、受光器为一个光敏半导体管

拥有体积小、寿命长、无触点、抗干扰强、输入输出绝缘等优点

MOC3020 是其中一款产品。

## 触发器
在实际的数字系统中往往包含大量的存储元件， 且经常要求它们同一时刻同步动作，为达到这个目的，在
每个存储单元电路上引入一个时钟脉冲（CLK）作为控制信号，只有CLK到来时电路才被“触发”而动作，并根据输入
信号改变输出状态。
这种在时钟信号触发时才能动作的存储单元电路，称为触发器，以区别没有时钟信号控制的锁存器。

D触发器是触发器的一种，它在时钟脉冲CP的前沿（正跳变0-1）发生翻转。D触发器的应用很广，如数字信号的
寄存、移位寄存、分频和波形发生器等。

74HC574是D触发器中的一种芯片

## 存储器
KEY: RAM ROM 存储阵列 行列译码

### 简介
	存储器是计算机的数据记忆存储设备，用具有两种稳定状态的物理器件来存储信息（二进制数据）。按存储介质可分为半导体存储器和磁表面存储器，按功能作用可分为主存储器、辅存储器、高速缓冲存储器、控制存储器等。
	半导体存储器由半导体芯片制成，可存在于片内（如CPU内部）、片上（板载）或成为独立设备（如内存条），可用作主存储器、高速缓冲存储器和控制存储器，如ROM、RAM、Register，也可用作辅助存储器，如FLASH。磁表面存储器由载体和磁性材料组成，常用作辅助存储器，如磁盘、光盘、磁带等。

### 半导体存储器
	根据摩尔定律，半导体芯片每2~3年革新换代一次，从1970年至今半导体芯片晶体管集成度已达数十亿级别，其中半导体存储器占芯片的大部分面积。主要分为四大类：只读存储器ROM、随机存取存储器RAM、寄存器Register和闪存Flash
![PC](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PC-memory.png)
![memory](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/存储器分类.png)

1. ROM -  Read-Only Memory，只读存储器，又称程序存储器。ROM在制作时或制作后写入数据，在工作时只能进行读操作，断电后数据不丢失，通常只有几十k或几百k的存储容量，常用于存储固件。按制作工艺可分为掩膜ROM-MROM（制作时形成数据）、可编程ROM-PROM（制作后一次性写入）、可擦可编程ROM-EPROM（紫外线照射擦除，可多次写入）、电可擦可编程ROM-EEPROM（电擦除，可多次写入）。

2. RAM- RAM - Random Access Memory，随机存取存储器，又称数据存储器。RAM可以随机存取，速度快，但断电后数据丢失，通常有几M、几百M或几G的存储容量，用于操作系统下的数据的临时存储。RAM分为静态RAM（Static RAM - SRAM）和动态RAM（Dynamic RAM - DRAM）

	A: SRAM
	SRAM分为MOS型SRAM（NMOS、CMOS）和双极型SRAM（TFT），由于SRAM的复杂电路结构，使得成本要比DRAM高很多，而且集成度低，一般只有几十K~几百K或几M存储容量。
	SRAM读写速度极快，功耗低，常用作高性能微处理器中的高速缓存（Cache）。SRAM在工作时电路不需要刷新，只要供电就会一直存储数据，断电后数据消失。SRAM由三部分组成：存储单元阵列、（行/列）地址译码器、读写电路。

![行列](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/行列译码器1.png)
	存储容量常写为乘法形式，如：“2Kx8位”，表示存储容量为16Kbit或2KByte，并可推导该芯片的地址总线数：“2K=2^11，有11根地址总线”；8位表示有8根数据总线，8个存储元视为一个存储单元。同一容量的SRAM有不同的存储实现方式，如：“1Kx16位、2Kx8位、4Kx4位、8Kx2位、16Kx1位等”；并可以是单片形式，或者通过其它存储阵列并联组成。
![行列](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/行列译码器2.png)

3. FLASH
	闪存是EEPROM的发展，又兼具RAM的特性，其集成度高、功耗低 、体积小 ，又能在线快速擦除
	Flash可归属ROM家族，因其特性单独讨论，安卓手机上常提到的ROM通常指FLASH，而不是MROM、PROM、EPROM或EEPROM等。

4. EEPROM 及 存储保护
1.软件
A.上电延时
B.存储备份和恢复
2.硬件
A.MCU自带功能,如AVR的BOD功能
B.大电容防止存储掉电

## PAGE / BANK

PAGE/BANK一般出现在简单的单片机中，PAGE对应于ROM，BANK对应于RAM，作用基本一致

BANK这里当做“储存块”来讲

有些指令只能操作很小的地址范围，通过BANK的方法（通过寄存器配置选中哪一部分来操作）可以将指令寻址大大增加，BANK
也同时增加了程序复杂性

## CISC/RISC

复杂指令集与精简指令集

CISC具有大量的指令集，并增加硬件复杂性以满足用户的需求

RISC则反之，只拥有较少的指令，而把复杂性嫁接到软件复杂性上

一般CISC有几百条指令，而RISC只有几十条指令

目前PC机的CPU基本上都还是CISC指令集的，

RISC 和CISC 的区别：
①RISC 指令系统较小，种类的数量较少，只提供简单指令。CISC 指令系统大，种类的数量多，
提供各种指令。
②RISC 指令长度、寻址方式、格式都整齐划一，这样可以充分利用流水线，基本上可实现一个
时钟脉冲执行一条指令。CISC 指令长度、寻址方式、格式不一，难通过流水线方式提升指令执行效
率，无法做到一个时钟脉冲执行一条指令。
③RISC 的函数调用将现场状况保存在专用寄存器中来提升效率，参数也使用寄存器传递。CISC
的函数调用一般通过堆栈保存现场，需要内存操作，效率要低

## 专用单片机的辉煌与落寞

### 冯·诺依曼结构与哈弗结构
冯诺依曼结构（也称普林斯顿结构）是计算机的启蒙结构，也是使用了相当长一段时间、并且现在计算机仍然在采用的计算机体系结构，

冯诺依曼提出 程序（指令）和数据 共用同一组地址总线和数据总线，这样 读取程序代码和数据就不能同步运行

哈弗结构将 程序（指令） 和 数据 分开存储， 使用两条独立的总线，如此哈弗结构单片机片内至少存在4套总线：指令数据总线、指令地址总线、数据的数据总线、数据地址总线
，显然，哈弗结构可以同时获取指令和数据，互不干扰，效率更高

这就是冯诺依曼结构和哈弗结构的主要区别：哈弗结构少了一次总线切换。

### DSP

DSP就采用了哈弗结构，但只是采用哈弗结构不能显著提示单片机效率，于是DSP增加了很多硬件设备，如乘法器，对于没有乘法器硬件的单片机来说，实现一个乘法可能需要几十条
、上百条的指令，而有了乘法器，一个指令周期就将乘法搞定。
同时DSP还使用了流水线设计，使得原来的"取指、译码、执行“三步在一个信号周期内就完成了，即在执行指令的同时对下一条指令译码并同时取得下一条指令，真正的流水线更加复杂
会有很多的优解。

DSP是专门对数字信号处理作出的设计，在处理数字信号时会比冯诺依曼结构快很多，但如果用DSP实现简单的逻辑控制并不一定比冯诺依曼结构快

不是所有的单片机都是冯·诺依曼结构，在移动数字通讯刚刚兴起的年代，DSP 那是望尽春色，
近年来随着技术的发展单片机的速度是越跑越快，有一些单片机也开始采用哈佛结构，少数单片机
内部甚至会加上一个小的DSP 核，使得DSP 在数字处理速度方面的优势逐步变小，加上一些专用器
件内部采用硬内核进行数据处理，这些变化恐怕让DSP 难以再现昔日辉煌。

这不仅仅是DSP的过程，也将是许多专用单片机的故事，将来或者是现在，一个ARM-A9或许可以把所有单片机都替代了

## 术语

MIPS ： 百万指令每秒


## 74系列芯片
74系列芯片是TI德州仪器、NXP恩智浦、ST意法半导体等半导体公司生产的中小规模TTL集成电路芯片，主要用于计算机数据的输入、输出、锁存等处理，工作温度在-40~85℃之间。该系列芯片以74开头，连接字母或数字以标识不同功能。

例：74XXX 标准型TTL、电压2.4V、传递延迟9ns、功耗10mW。74LXXX低功耗TTL、电压2.4V、传递延迟33ns、功耗1mW。74HXXX高速型TTL、电压2.4V、传递延迟6ns、功耗23mW。

芯片最后的一个或几个字母，表示封装方式，不同厂家有不同标记方法，一般D表示SOP封装，如74HC138D

74或74+字母之后的数字表示该芯片的逻辑功能，不同的字母，相同的逻辑数字，其逻辑功能一样：
如：74LS224与74HC224的逻辑功能是一样的

附：
秒   1s = 1000ms
毫秒 1ms = 1000us
微秒 1us = 1000ns
纳秒

## ADC

### 简介
	ADC（Analog to Digital Converter）也称A/D，即模/数转换器，是将外界连续变化的模拟信号转换为离散的数字信号的电子元件。ADC最早用于无线电台中无线信号向数字信号的转换。与ADC对应的电子元件为DAC数模转换器

### 分类
	有多种ADC类型：并行、逐次逼近型、积分型、∑-Δ型、流水线性，低功耗、高速、高分辨率是ADC的发展方向。其中并行ADC是当今速度较快的模数转换器。
	AVRATMEGA128集成逐次逼近型ADC

### 指标

#### ADC 采样率和分辨率 是两个重要的参数

分辨率 - 模拟量量化为数字量的精度 - 量化精度（也称ADC精度，位数）
采样率 - 模拟量量化为数字量的速率 - 量化速率（单位SPS，或b/s或Hz） 
- 采样个数/采样时间 - 单位时间内采样个数 
- 显然采样率与分辨率有关，- 分辨率越高，样本数量越大，单位时间内采样数量越大，采样率越高
- 如果采样率可配置，则分辨率固定的情况下，增大采样率，同一时间内可采样更多样本

采样率是与分辨率有关联的，ADC手册经常看到的参数描述如："8位分辨率下采样率79kSPS , 最高分辨率时采样率高达15 kSPS"
因为采样率表示数字量 ，数字量量化为模拟量的速率 ，ADC精度高，则代表的数值范围越大，数字量变多，所以相同时间内采样速度变慢
所以分辨率越高，采样率越小。它们之间可能没有固定比例关系，应该跟不同的ADC有关。

有些ADC的采样率和分辨率是可配置的。有些则不能，如ATMEGA128，分辨率固定为10位，采样率为15kb/s

![采样频率1](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/采样频率1.png)
![采样频率2](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/采样频率2.png)

采样率与奈奎斯特频率：采样率应至少为采样信号频率的两倍，(从这个角度讲，ATMEGA128不能对信号频率大于7.5kHz的进行采样??),
	如果低于这个频率，采样信号失真.

![奈奎斯特1](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/奈奎斯特1.png)
![奈奎斯特2](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/奈奎斯特2.png)

#### 基准电压

基于参考电压来将模拟量转换为数字码，因为数字电路只认高低电平，所以如果没有参考电压ADC读取来的电压值将是无意义的，（数字信号本身不具实际意义，仅表示相对大小1/0）而这参考电压又称基准电压，其指标是温漂，一般用ppm/K表示。
假设ADC的基准电压为5V、输入电压3V，则输入电压/基准电压=60%，对于8位ADC而言，该模拟量代表256X60%=153（0X99）。
公式：Dadc = 2n X ( Vadc / Vref )，其中n为ADC精度。
可见输入电压大于基准电压时ADC达满精度（满量程），输入电压为0V时，ADC为最小精度0。再设计上，基准电压最高值应该等于参考电压，如果基准电压不够，则可以使用功率放大器放大或使用ADC自带的增益。

#### 单端与差分输入通道

单端输入是指被测电压从某个引脚输入，其参考电压是内部电压或GND。差分输入需要两个输入引脚，其参考电压时两个引脚彼此之间的相对电压。其中单端输入方式较为常见。
单端方式适用于传感器到ADC的线距离较短（5m以下），且所有输入信号要共用一个基准地。差分输入适用于更长距离的数据传输，更适用于噪声较大的使用场景。
 
如图所示，单端输入只有一个输入引脚ADCIN，使用公共地GND作为电路的返回端，ADC的采样值=ADCIN - GND(0V)。这种输入方式优点就是简单，缺点是如果VIN受到干扰，由于GND电位始终是0V，所以最终ADC的采样值也会随着干扰而变化。
而差分输入比单端输入多了一根线，最终的ADC采样值=(ADCIN+) - (ADCIN-)，由于通常这两根差分线会布在一起，所以他们受到的干扰是差不多的，输入共模干扰，在输入ADC时会被减掉，从而降低了干扰，缺点就是接线复杂一些。而且需要VIN+和VIN-两路反相的输入信号。

![通道1](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/ADC通道1.png)
![通道2](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/ADC通道2.png)

其它术语参考：https://www.maximintegrated.com/cn/app-notes/index.mvp/id/641
https://zh.wikipedia.org/wiki/%E9%A1%9E%E6%AF%94%E6%95%B8%E4%BD%8D%E8%BD%89%E6%8F%9B%E5%99%A8


	---------------------------实验记录

	热敏电阻测温实验，
	设置ADC时钟分频为2（CPU时钟16MHz），时钟频率为8MHz，发现Vadc = 4.99，Dadc = 1023。
	设置为4分频时，时钟频率 = 4MHz，Vadc和Dadc的值正常。
	设置8分频、16、32、64、128分频都正常。

	原因未知。

	------------------------------

### Other
	ADC串联电阻的意义：关键词：数字电源、模拟电源、隔离、去耦、ADC性能、数字瞬态电流

## TTL与CMOS电平
	TTL电平：晶体管-晶体管逻辑电平，是计算机电路中的标准电平，它使用+5v=逻辑1、0V=逻辑0。

	TTL与CMOS
	TTL电路速度快、延迟小、功耗高、抗噪声能力差
	CMOS电路速度慢、延迟高、功耗低、抗噪声能力强

	TTL电平的实际标准
	输出：
	高电平 - >2.4V
	低电平 - <0.4V

	输入：
	高电平 - >2.0V
	低电平 - <0.8V

	CMOS电平的实际标准
	低电平（逻辑0）
	输入 - <0.3 * Vcc
	输出 - <0.1 * Vcc

	高电平（逻辑1）
	输入 - >0.7 * Vcc
	输出 - >0.9 * Vcc

	可见CMOS电平的高低电平取值是依电源电压而定的
	，高电平接近电源电压，低电平接近0

# 晶振

晶振是单片机系统的指挥家，它发布统一的工作节奏，注意，是统一而不是同一，统一意味着A吹两下笛子，B就得拉四次小提琴，这样不同的乐器
在统一的指挥下才能演奏出动听的交响曲。
晶振 就是 晶体振荡器，或 石英晶体振荡器， 石英这个东西就厉害了，他就是二氧化硅，天下物料之集大成者：玻璃、光纤、玛瑙、水晶、单片机等等。

石英晶体具有压电效应：给晶体薄片施加电场，晶体会形变，当移除电场时，晶体恢复形变并释放电场，如此往复形成固定的震动频率

RC振荡器（电容和电阻组成的振荡器）也可以作为触发信号源，但稳定性比晶振差、如果产品对时间精度要求不严格（比如一种按键发光的儿童玩具）就可以用RC
振荡器来节约成本

选多快的晶振？是不是单片机要跑多快就用多大的晶振？
NO！频率越快，越容易产生电气噪声干扰，越难以控制，并且晶振对电路要求很高（在距离和走线上等等），如果放置不当还不会正常工作。
晶振作为一个外部器件，要提供的频率应该越稳定越好，而不是越快越好，那单片机需要更快的振荡频率怎么办呢？
这就需要*锁相环* PLL 技术来解决，该技术可以将晶振频率加倍（N倍），进而实现更高的振荡频率
另外PLL还具有动态改变工作频率的能力
此外，还有分频器，即将晶振频率(或其它频率)分解的更小来使用


通过上述知识可知，通过晶振振荡可将震动传递给单片机内部，单片机内部可以通过倍频或分频技术来利用，无论倍N频还是分N频，显然都必须具备N是整数
，通过将外部晶振 倍频和分频得到的震动频率，就是*系统时钟*

# I/O复用技术

为了单片机增加I/O功能，又不能增加I/O管脚数量，只能将IO做成复用的，即一个接口可以有多种功能
不同的功能配置，通过单片机寄存器配置来完成

## IO与GPIO
IO就是输入输出，在单片机中代表输入输出接口，GPIO是近来兴起的说法，意为“通用IO”，都是一样的，叫法不同而已


# 上拉电阻

将不确定的信号接口，通过一个电阻拉在高电平，这个电阻就是上拉电阻，电阻同时起到限流的作用
下拉电阻就是将不确定的信号接口，通过一个电阻拉在低电平，这个电阻就是下拉电阻



# PWM

PWM即脉宽调制，其本质原理是“恒流斩波”：改变负载开关的开关频率或直流电流的接通和通断时间，就可以改变加载到负载上的电压和电流的平均值。从这个意义上说，PWM类似与负载串联的可调电阻。
(具数据统计，使用直流斩波器代替变阻器可节约电能约25%，利用直流斩波原理制作的器件角DC/DC，这一原理还实现了PWM技术。)
	PWM可以用软件模拟，也可以用硬件实现，在计算机中通常使用定时器来产生PWM。通过软件模拟，即通过延时来调整高低电平的输出时间，进而调整脉宽。脉宽即脉冲宽度，脉冲与脉宽是两个概念。
	While(1)
{
	PORTA = 0XFF;
	DELAY(1);
	PORTA = 0X00;
	DELAY(1);
}
该代码可产生占空比为50%的方波，占空比表示一个PWM周期内有效电平所占时间与整个周期的比值，有效电平通常指高电平，在一些应用中也可能是低电平。

![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWM1.png)
上述图示PWM占空比为50%，红色部分表示PWM一个周期。
高峰表示Vcc，低谷表示GND
![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWM2.png)

实际产生的电压值为(Vcc - 0v)x50%

PWM占空比为100%时的情况，此时负载电压为Vcc，以最高能量工作。
![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWM3.png)

PWM占空比为0%的情况，此时负载电压为0v，不工作。

![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWM4.png)

PWM可以用来驱动电机以，通过调整占空比，进而调整步进电机电压，从而控制其转速。
PWM也可以驱动LED灯，通过调整占空比，进而调整LED电压，让其产生“呼吸”效果。

可见要产生PWM，就必须实现快速的开关通断，这个速度是如此之快，以至于手工和机械都是完成不了的，所以必须使用继承电路IC实现。

PWM作为一种波形，携带这两种信息，一个是脉宽->占空比，另一是频率，前者是主要信息，是PWM的本质，后者是任何波形都携带的信息。脉宽信息决定着实际输出电压，频率信息决定着脉宽信息的改变速度。比如，当PWM用于驱动LED呼吸时，PWM脉宽决定了LED的呼吸（脉宽从0%~100%~0%改变），而PWM频率信息决定了LED的呼吸速度。又比如，当PWM用于驱动电机时，PWM脉宽决定了电机速度，而PWM频率决定了电机切换速度的速度。

附：PWM波是非正玄波，这使得输出的能量不能得到充分利用，于是产生了正玄波脉宽调制SPWM、SVPWM。

附：简易的呼吸灯设计
![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWM-呼吸灯.png)

整个程序分两段，在死循环中，前段为PWM产生代码，后段为闪烁方向设计。闪烁方向设计让呼吸灯从”亮到灭到亮”变化，否则“从亮到灭，从亮到灭”变化。
要注意，上述程序延时使用微秒，而不是毫秒或秒，微秒级别的延时让人的眼睛看不到灯闪烁的过程（为了产生PWM只能让让灯亮灭），这里也利用了人类的视觉暂留原理，实际上灯是在飞速的闪烁，要看到这个效果，只需把微秒改成毫秒即可。
还有，数值一定要连续，才能使PWM模拟从0~5V的持续电压变化，如果给定数组查表，而不是从0累加，那么数组值一定要密集（采样足够多），否则也会产生毫秒级别的闪烁。（也可以理解为，要使尽量使PWM接近正弦波）
最后，改变微秒级别的闪烁值（setTimeCount），就可以改变灯的呼吸速度，从上述程序中也可以看到，一定要保证PWM周期固定，然后改变亮与灭的占空比即可。


附：通过示波器测量，上述程序产生的是方波，PWM本质就是方波，所以测量无误，即便程序模拟使PWM近似正玄波，但结果还是方波。
测量晶振结果为正弦波（晶振产生的是正弦波，通过电路滤波后形成供电路系统使用的方波）
![stdExp](https://github.com/Jim-CodeHub/Skills-list/raw/master/image/PWM-N.png)



PWM恒流斩波效果的实现需要PWM周期足够小

(一般刷新频率子60Hz以上就可以了，这个跟电脑显示器的刷新频率一致，一般PC机显示屏的最低刷新频率是60Hz，即1秒刷新60次[即16.7ms/次])

如果一定要使用较大周期怎么办呢？

比如1s为周期可以实现恒流斩波效果

10s呢？

10s就必须将其均匀化！

如果在1s时使用的是50%方波，则在10s周期时，每1s都分为两部分，这样10s就被分为20个部分，其中10个部分为50% HIGH level，另外10个部分为50% LOW LEVEL
如此就在比较大的周期中实现PWM效果了！

如果在1s时实现的是20% · 80%

同样在10s周期中将每1s都实现20%~80%

这样，无论在多长的周期中，都可以实现PWM效果

代码

// 20% 占空比 PWM周期1s

delay(0.2)
	PORTA = 0X00;
delay(0.8)
	PORTA = 0XFF;

	// 20% 占空比 PWM周期5s 1s均化

	for(int i=0; i<5; i++)
{
	delay(0.2)
		PORTA = 0X00;
	delay(0.8)
		PORTA = 0XFF;
}


占空比才是真正PWM应用的，其实就是开关的打开和关断的时间比值，这个比值在宏观上可以欺骗人眼，于是形成和电位器一样的作用。比如对一个电灯来说，你在1秒内，打开开关0.5秒，再关闭0.5秒，如此反复，那么电灯就会闪烁，但是如果是1毫秒内，0.5毫秒打开，0.5毫秒关闭，由于视觉暂留作用，也可能由于灯光的亮灭速度赶不上开关速度（还没全亮就又没电了），于是人眼不感觉电灯在闪烁，而是感觉灯的亮度少了一半。同理，如果是0.1毫秒开，0.9毫秒灭，感觉灯的亮度就只有1/10了。对于电机的原理也差不多，开关开时电机加速，关闭时电机减速，根据是加速时间多还是减速时间多，我们感觉总体的转速就是快了或慢了。当然，具体分析时还需考虑电机的电感作用，电感有滤波效果，但是用这个方式去理解也是成立的。
	回到前面的频率问题，就如刚才说的，1秒内，0.5秒开，0.5秒灭，占空比是50%对吧？那么，1毫秒内，0.5毫秒开，0.5毫秒灭，占空比也是50%，对吧？如果是1秒呢，频率就是1HZ，如果是1毫秒，频率就是1KHZ，显然，同样是50%占空比，如果频率是1HZ，那电机肯定是跳着走的，灯光肯定闪得可以跳舞，不具有调速和调光的意义。

	PWM 主要用途是通过对一个的电源开关控制可以得到输出电压大小和占空比成正比的电源，虽
	然DAC 也可以输出与数字对应的电压，但这个电压驱动能力很弱，要想提供比较大的驱动能力实现
	起来很难，但PWM 很简单，只要用三极管等做为开关控制元件向后面的大负载提供电源。对电源的
	控制实际上也是对输出功率的控制，所以PWM 在马达转速、灯光亮暗这类控制上有着广泛的应用。


---------------------------------------------------------------------------------------------


# 一周搞定系列 之 模电 第一章 基本元器件

## 二极管

二极管就是 把PN结封装起来 然后在P和N两端加个引线

特性： 单项导电性、伏安特性

属性： 1. 普通二极管导通后的电压值是(约)0.7V，0.5V时开始导通
	   2. 发光二极管导通后的电压值是(约)1~2V，电流范围是5~20mA，电流和电压不在此范围时，发光二极管不导通、不发光
	   3. 二极管反向不导通，但当反向电压足够大时也会导通，此时称为反向击穿

### 稳压二极管

具有稳压作用的二极管，用到了二极管的伏安特性。

在给二极管施加反向电压时，电流值处于 导通与击穿之间时，二极管电压处于稳定区域，此时二极管具有稳定（与其并联的）器件电压的功能。

要注意的是要选择合适二极管，给其施加的反向电压不能太小，太小将不能导通，太大将击穿二极管

稳压二极管的使用形式为：电阻和二极管的串联，二极管反向接入电压


### 整流二极管

用于把交流电编程脉动直流电

交流电是正弦波，将正弦波反向部分切除（即180到360的相位切除，因为二极管反向不导通），得到的即是脉动直流电，类似PWM方波，所以称为脉动

### 开关二极管

导通 和 截止 两种状态的切换时间比普通二极管快，使得其在电路中有开关作用，用于保护反向电流损坏所保护的器件

## 电容

电极板+中间介质封装而成。

电容具有旁路(支路)、去耦、滤波、和储能的作用

1. 旁路

	1）使输入电压均匀化，减少噪声对后级系统的影响
		来自于电源的电压不保证是稳定的，或不保证一直是稳定的，不稳定的直流电压将影响数字电路系统的逻辑判定，这将导致致命的做错。
		不稳定的直流电压的波形类似周期多变的交流电，而电容具有“通交流，隔直流"的功能
		，在电源接入器件之间 并联旁路电容于GND，当有不稳定的直流电通过时将通过旁路电容过滤到GND

		旁路电容应接到离器件较近的位置，而不是离电源较近的位置


	2）进行储能，当信号变化过快时进行电压补偿

		器件的高低电平快速切换可能导致输入电压供应不及时，此时旁路电容可将存储的电能及时释放补充给器件使用

2. 去耦（退耦）

	去耦电容和旁路电容类似，区别是旁路电容用于输入信号、去耦电容用于输出信号.

耦合-辞海 : 两个元素/量之间,其中一个量的变化,导致另一个元素/量的变化的一种关系

	去耦连接器件输出信号，减少了输出信号不稳定信号对周围/下级器件的耦合作用

		

	去耦电容一般相对较大，如10uF、旁路电容较小，如0.1uF 0.01uF

3. 滤波
	去耦/旁路电容的容值选择与滤波电路有关
	这也与信号频率相关，因为大电容用于滤除低频噪声，而小电容用于滤除高频噪声

4. 注意
	铝解电容 连接分正负极，磁片、独石电容不分正负极

## 三极管

PNP 或 NPN结组成的晶体管

三极管具有三个极：b-basic基极 c-collector集电极  e-emit发射极

定义：称b-c之间的结为集电结、称b-e之间的结为发射结

三极管是利用“输入电流”控制“输出电流“的元件

即使用b基极的电流来控制e发射极的电流，可以把三极管类比一个水桶，c是储水区、b是开关区、e是流水区，

b同样需要使用水流来控制开关的大小，b没有水流入时开关闸门关闭，C的水留不下来，e流不出来水，这种情况称为三极管的 “截止”状态
b给一定的水流，闸门开一定大小，此时c流下水，并且流下的水是b的倍数，此时称为三极管的“放大状态”
b继续增大输入水流，闸门开到了最大，此时称为三极管的“饱和状态”

将水流依次比作电流，则有：Ie = Ib + Ic。Ic = βxIb ，即Ie = (1+β)xIb

定义：设b c e的电压为Ub Uc Ue
	Ub > Uc 称为集电结正偏，反之为集电结反偏
	Ub > Ue 称为发射结正偏，反之为发射结反偏

要使三极管工作在截止状态，使Ue > Ub，即发射结反偏，或三极管电压为0
				放大	，使Uc > Ub, Ub > Ue, 即集电极反偏，发射极正偏
				饱和    ，使Ub > Ue, Ub > Uc，即发射极和集电极都正偏


处于截止状态时，集电极与发射极之间相当于开路。

处于放大状态时，Ic由Ib控制

处于饱和状态时，集电极与发射极之间电压很小，相当于导线
				工程上认为饱和时Uce=0.3V(硅）或0.1V(锗)

				饱和状态时，Ic不再由Ib控制

附：三极管的特征频率
	三极管工作也受（脉冲）频率的限制，但基本上可以满足大部分单片机，如9013为150MHz


## 场效应管

	类似三极管，也是PN结构造的晶体管，三个电极为G-栅极、D-漏极、 S-源级 （类比三极管中的b、c、e）	

	不同于三极管的是场效应管是利用“输入电压”控制”输出电流“的元件

	控制的电流为Id，Id受Uds和Ugs影响，

	当Uds很小时,Id随Ugs的增大而增大、减小而减小，约成线性关系，称该区域为场效应管的可变电阻区

	当Uds在X范围时，Id随Ugs变化，此时不受Uds影响，该居于称为场效应管的恒流区

	当Uds小于1.5V时，Id=0，场效应管不导通，该区域为截止区

	当Uds大于Y时，场效应管被击穿，Id突然增大，注意要对场效应管击穿做Id限制，否则管子将被烧坏，该区域称为击穿区

	在横流区与击穿区之间的区域称为“过损耗区“，长期间在该区域工作会导致场效应管过热，为此要做好散射措施，如加散热片

### VS 

	场效应管和三极管实现的功能类似，目的是控制输出电流，三极管的特点为：

	1）电流控制器件，利用基极电流来控制晶体导电能力
	2）输入阻抗不高
	3）噪声大
	4）反应速度快

	场效应管的特点为：

	1）电压控制器件，利用电压产生的电场来控制导电能力
	2）输入阻抗极高（这意味着较小电流将产生较大电压，适合电压控制器件）
	3）噪声小
	4）反应速度慢

## 光耦
	
	光耦实现了 “电-光-电”的转换，有发光二极管和光敏三极管组成

	信号输入 发光二极管发光，光被光敏三极管接收，三极管决定电路通断

	光耦又称光电耦合器（耦合见辞海），是小电流控制大电流或小电压控制大电压器件的一种安全方式，因为这是一种“无接触、无反弹”式电路控制

## 发声器件

	喇叭、蜂鸣器等

	喇叭为无极性器件，即没有正负之分

	蜂鸣器分为有源和无源的，无源蜂鸣器内部没有震荡源，直接用直流不能驱动，需要2KHZ-5KHZ的方波才能驱动
	，有源蜂鸣器内部含有震荡源，直接输入（1.5V-15V）直流就可以发出声响

## 继电器

	类似光耦，用低电压小电流去控制高电压大电流

	继电器常用在开关速度不高的场合，否则使用光耦

### 光耦vs继电器

	光耦	：无触点、开关速度快、寿命长、负载能力小
	继电器  ：有触点、开关速度慢、寿命短、负载能力大

	所以，要求大负载能力且开关速度较慢的场合使用继电器，而小负载能力且开关速度较快的场合使用光耦


### PS 电流与感觉

				交流电															直流电

	<0.5mA		基本没感觉														没感觉

	0.5~1mA		轻微酥麻														没感觉

	5~7mA		开始痉挛														热和痒

	8~10mA		针刺感、疼痛、轻微痉挛											热感增强

	20~30mA		迅速麻痹而不能摆脱带电体、血压升高、呼气困难					热感大大增强，肌肉开始僵硬

	50mA~100mA	呼吸麻痹、心脏颤动、数秒致命									强热感、呼吸麻痹、痉挛

	300mA及以上	0.1s over


	可以看到mA级别的电流就对人有伤害了
	所以电流的单位还是很大的，单片机电路中常用的就是mA

	所以1A已经是很大的电流了

	电棍的电流也是很小的，属于高压低流设备，之所以要高压，是因为要产生瞬时电流来使电棍产生作用
	

## 数码管
	通过控制不同的LED灯来显示所需要的字符0~F

## 瞬态高压抑制器 TVS

	二极管封装形式的高效保护器，放置瞬时高能量冲击，保护精密器件被各种浪涌脉冲破坏

	1、加在信号和电源线上，能防止微处理器，人体
	静电、交流浪涌或噪声，导致处理器的失灵。

	2、能释放超过10000V，60A以上的脉冲，并能持
	续10ms，而一般的TTL器件，遇到30ms的10V脉
	冲时，便会导致损坏，所以利用TVS是既可以防止
	器件损坏，也可以防止总线之间开关引起的干扰。

	3、将TVS放置在信号线和地之间，能避免数据及
	控制总线受到不必要噪声的影响。


# 一周搞定系列 之 模电 第二章 基本电路验证与分析

## 基本放大电路

	基本放大电路的核心是三极管，电阻和电容辅助

	三极管放大电路是小信号的放大，常用器件最大通过电流也只有几百毫安，所以输入信号不能太大


### 反馈
	凡是将放大电路输出端的信号（电压、电流）的一部分或全部引回到输入端，与输入信号叠加，称为反馈

	负反馈 - 引回的信号削弱了输入信号
	正反馈 - 引回的信号增强了输入信号

## 电源电路 
	由整流桥、电容、二极管组成的电路

### 开关电源

## 集成运算放大器

	具有很高放大倍数的多级 直接耦合的 运算放大电路
	是发展最早、应用最广泛的 模拟集成电路

	特点：
		高增益、高可靠性、低成本、小尺寸



# 一周搞定系列 之 模电 第三章 仪表放大电路

## 积分运算电路
## 微分运算电路 
## 有源滤波电路
## 采样保持电路
## 文氏桥振荡电路


## 功率放大器
	功率放大电路是一种以输出较大功率为目的的放大电路

	特点：
		输出信号电压大
		输出信号电流大
		放大电路的输出电阻与负载匹配

	电压放大器与功率放大器的区别
		电压 - 不失真的提高输入信号的幅度，通常工作在小信号状态
		功率 - 不失真或轻度失真的条件下提高输出功率，通常工作在大信号状态


# 一周搞定系列 之 模电 第四章 实际电路应用

## 多路稳压电源
## 数控恒流源 




---

电子及其运动 是电子学的核心，是解释所有有关电的现象的原理

电流的本质是电子的运行，电压是导体两点之间的电流不平衡导致的，本质是导体两点之间电子多少导致的

